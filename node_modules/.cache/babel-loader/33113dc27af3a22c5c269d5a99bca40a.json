{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexd\\\\Documents\\\\Progetto-Unipa\\\\Frontend\\\\src\\\\Prenota\\\\Prenota.js\";\nimport React from 'react';\nimport { Form, Col, Button, Accordion, Card, Alert } from 'react-bootstrap';\nimport './Prenota.css';\nimport { Redirect } from \"react-router-dom\";\n\nclass Prenota extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n\n    this.setShowSucc = e => {\n      this.setState({\n        success: e\n      });\n    };\n\n    this.setShowErr = e => {\n      this.setState({\n        error: e\n      });\n    };\n\n    this.setShowSuccSogg = e => {\n      this.setState({\n        successSoggiornante: e\n      });\n    };\n\n    this.setShowErrSogg = e => {\n      this.setState({\n        errorSoggiornante: e\n      });\n    };\n\n    this.setShowIncomplete = e => {\n      this.setState({\n        incomplete: e\n      });\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n\n      if (this.state.pagamento === '' || this.state.length < this.state.posti) {\n        window.scrollTo(0, 0);\n        this.setState({\n          incomplete: true\n        });\n        return;\n      }\n\n      for (var i = 0; i < this.state.soggiornanti.length; i++) {\n        const data = {\n          ref_soggiornante: this.state.soggiornanti[i],\n          ref_cliente: localStorage.getItem(\"email\"),\n          ref_proprietario: this.state.dati_casa.ref_proprietario,\n          ref_proprieta: this.state.dati_casa.id_proprieta,\n          num_soggiornanti: this.state.posti,\n          costo: this.state.pagamento === 'ora' ? this.state.dati_casa.costo + this.state.posti * 3 : this.state.dati_casa.costo,\n          caparra: this.state.pagamento === 'ora' ? 0 : this.state.dati_casa.costo,\n          data_partenza: this.state.checkIn,\n          data_ritorno: this.state.checkOut\n        };\n        fetch('http://192.168.1.106:9000/insertPrenotazione/new', {\n          method: \"POST\",\n          headers: {\n            'Content-type': 'application/json'\n          },\n          body: JSON.stringify(data)\n        }).then(result => result.text()).then(result => {\n          this.setState({\n            apiRespone: JSON.parse(result)\n          });\n\n          if (this.state.apiRespone.status === 'error') {\n            window.scrollTo(0, 0);\n            this.setState({\n              error: true\n            });\n            this.setState({\n              errorMessage: this.state.apiRespone.message\n            });\n          }\n        });\n      }\n\n      if (!this.state.error) {\n        window.scrollTo(0, 0);\n        this.setState({\n          success: true,\n          error: false\n        }, () => {\n          window.setTimeout(() => {\n            this.setState({\n              success: false\n            });\n          }, 3000);\n        });\n      }\n    };\n\n    this.onSubmitSoggiornante = e => {\n      e.preventDefault();\n      const data = {\n        cf: this.state.cf,\n        nome: this.state.nome,\n        cognome: this.state.cognome,\n        nascita: new Date(this.state.nascita).toLocaleDateString()\n      };\n      fetch('http://192.168.1.106:9000/insertSoggiornante/new', {\n        method: \"POST\",\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(result => result.text()).then(result => {\n        var res = JSON.parse(result);\n\n        if (res.status === 'error') {\n          window.scrollTo(0, 0);\n          this.setState({\n            errorSoggiornante: true\n          });\n          this.setState({\n            errorMessage: res.message\n          });\n        } else {\n          window.scrollTo(0, 0);\n          this.setState({\n            successSoggiornante: true,\n            errorSoggiornante: false,\n            soggiornanti: this.state.soggiornanti.concat(this.state.cf)\n          }, () => {\n            window.setTimeout(() => {\n              this.setState({\n                successSoggiornante: false\n              });\n            }, 3000);\n          });\n        }\n      });\n    };\n\n    this.state = {\n      dati_casa: this.props.history.location.state ? this.props.history.location.state.dati_casa : [],\n      checkIn: this.props.history.location.state ? this.props.history.location.state.checkIn : '',\n      checkOut: this.props.history.location.state ? this.props.history.location.state.checkOut : '',\n      posti: this.props.history.location.state ? this.props.history.location.state.posti : 1,\n      numPosti: [],\n      maxDate: '',\n      partenza: '',\n      ritorno: '',\n      pagamento: '',\n      cf: '',\n      nome: '',\n      cognome: '',\n      nascita: '',\n      soggiornanti: [],\n      apiRespone: [],\n      error: false,\n      errorMessage: '',\n      success: false,\n      incomplete: false,\n      successSoggiornante: false,\n      errorSoggiornante: false\n    };\n  }\n\n  componentDidMount() {\n    if (this.state.checkIn !== '' && this.state.checkOut !== '') {\n      var str1 = this.state.checkIn;\n      var dmy1 = str1.split(\"/\");\n      var date1 = new Date(dmy1[2], dmy1[1] - 1, dmy1[0]);\n      var offset1 = date1.getTimezoneOffset();\n      date1 = new Date(date1.getTime() - offset1 * 60 * 1000);\n      var str2 = this.state.checkOut;\n      var dmy2 = str2.split(\"/\");\n      var date2 = new Date(dmy2[2], dmy2[1] - 1, dmy2[0]);\n      var offset2 = date2.getTimezoneOffset();\n      date2 = new Date(date2.getTime() - offset2 * 60 * 1000);\n      this.setState({\n        partenza: date1.toISOString().slice(0, 10),\n        ritorno: date2.toISOString().slice(0, 10)\n      });\n    }\n\n    var array = [];\n\n    for (var i = 0; i < this.state.dati_casa.posti; i++) {\n      array[i] = i;\n      array[i]++;\n    }\n\n    this.setState({\n      numPosti: array\n    });\n    var today = new Date();\n    const offset = today.getTimezoneOffset();\n    today = new Date(today.getTime() - offset * 60 * 1000);\n    this.setState({\n      maxDate: today.toISOString().slice(0, 10)\n    });\n  }\n\n  render() {\n    if (!localStorage.getItem('logged')) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/ErrorPage\",\n          state: {\n            error: true,\n            errorMessage: \"Utente non autorizzato\"\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 20\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"prenota-cont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n      show: this.state.incomplete,\n      variant: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Alert.Heading, {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 21\n      }\n    }, \"Dati non completi!\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 21\n      }\n    }, \"Non tutti i campi risultano essere compilati correttamente \\xA0 Inserisci tutti i dati necessari per proseguire\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => this.setShowIncomplete(false),\n      variant: \"outline-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 25\n      }\n    }, \"Ok\"))))), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n      show: this.state.success,\n      variant: \"success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Alert.Heading, {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 21\n      }\n    }, \"Prenotazione avvenuta con successo!\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 21\n      }\n    }, \"Il pagamento \\xE8 avvenuto correttamente \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 63\n      }\n    }), \"Le informazioni della tua prenotazione sono state prese in carico dal sistema e verranno presto inoltrate al gestore della struttura\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => this.setShowSucc(false),\n      variant: \"outline-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 25\n      }\n    }, \"Ok\"))))), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n      show: this.state.error,\n      variant: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Alert.Heading, {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 21\n      }\n    }, \"Prenotazione non avvenuta!\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 21\n      }\n    }, \"Si \\xE8 verificato un errore nell'inserimento dei dati, provare a ricompilare i campi\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => this.setShowErr(false),\n      variant: \"outline-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 25\n      }\n    }, \"Ok\"))))), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n      show: this.state.successSoggiornante,\n      variant: \"success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Alert.Heading, {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 21\n      }\n    }, \"Soggiornante registrato con successo!\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 21\n      }\n    }, \"Le informazioni del soggiornante sono state correttamente caricate all'interno del sistema. \\xA0 Compila le informazioni degli altri soggiornanti, se presenti\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => this.setShowSuccSogg(false),\n      variant: \"outline-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 25\n      }\n    }, \"Ok\"))))), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n      show: this.state.errorSoggiornante,\n      variant: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Alert.Heading, {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 21\n      }\n    }, \"Soggiornante non registrato!\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 21\n      }\n    }, \"Si \\xE8 verificato un errore nell'inserimento dei dati, provare a ricompilare i campi\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => this.setShowErrSogg(false),\n      variant: \"outline-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 25\n      }\n    }, \"Ok\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"prenota-sx-cont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 21\n      }\n    }, \"Conferma la tua prenotazione\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"infoviaggio\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 21\n      }\n    }, \"Info viaggio\"), /*#__PURE__*/React.createElement(Accordion, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"headaccpren\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 29\n      }\n    }, \"Date:\"), /*#__PURE__*/React.createElement(Accordion.Toggle, {\n      eventKey: \"0\",\n      id: \"modifica\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 29\n      }\n    }, \"Visualizza\")), /*#__PURE__*/React.createElement(Accordion.Collapse, {\n      eventKey: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      id: \"prenotaForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridDate\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 41\n      }\n    }, \"Check-In\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"date\",\n      placeholder: \"Inserisci data di inizio\",\n      id: \"data_partenza\",\n      name: \"data_partenza\",\n      value: this.state.partenza,\n      disabled: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 41\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridDate1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 41\n      }\n    }, \"Check-Out\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"date\",\n      placeholder: \"Inserisci data di fine\",\n      id: \"data_ritorno\",\n      name: \"data_ritorno\",\n      value: this.state.ritorno,\n      disabled: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 41\n      }\n    })))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"headaccpren\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 29\n      }\n    }, \"Numero ospiti: \"), /*#__PURE__*/React.createElement(Accordion.Toggle, {\n      eventKey: \"1\",\n      id: \"modifica\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 29\n      }\n    }, \"Modifica\")), /*#__PURE__*/React.createElement(Accordion.Collapse, {\n      eventKey: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      id: \"prenotaFormOspiti\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridDate\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 25\n      }\n    }, \"Ospiti\"), /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      onChange: this.onChange,\n      id: \"posti\",\n      value: this.state.posti,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 29\n      }\n    }, this.state.numPosti.map(item => /*#__PURE__*/React.createElement(\"option\", {\n      value: item,\n      id: \"posti\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 33\n      }\n    }, item)))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"headaccpren\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 29\n      }\n    }, \"Dati dei soggiornanti: \"), /*#__PURE__*/React.createElement(Accordion.Toggle, {\n      eventKey: \"2\",\n      id: \"modifica\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 29\n      }\n    }, \"Compila\")), /*#__PURE__*/React.createElement(Accordion.Collapse, {\n      eventKey: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      id: \"prenotaFormOspiti\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"formGridDate\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 25\n      }\n    }, this.state.numPosti.map(item => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 37\n      }\n    }, \"Soggiornante \", item), /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"input\",\n      placeholder: \"Codice fiscale\",\n      id: \"cf\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"input\",\n      placeholder: \"Nome\",\n      id: \"nome\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"input\",\n      placeholder: \"Cognome\",\n      id: \"cognome\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"date\",\n      max: this.state.maxDate,\n      placeholder: \"Data di nascita\",\n      id: \"nascita\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"bottonePrenota\",\n      onClick: this.onSubmitSoggiornante,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 37\n      }\n    }, \"Registra soggiornante\"))))))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 29\n      }\n    }, \"Scegli come pagare\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"containerPaga\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"paga\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 41\n      }\n    }, \"Paga per intero\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Form.Check, {\n      inline: true,\n      label: \"Paga adesso\",\n      type: \"radio\",\n      id: \"pagamento\",\n      name: \"pagamento\",\n      value: \"ora\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 45\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 45\n      }\n    }, \"Nel caso in cui tu voglia pagare gi\\xE0 adesso le tasse di soggiorno\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"paga\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 41\n      }\n    }, \"Paga una parte\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Form.Check, {\n      inline: true,\n      label: \"Paga dopo\",\n      type: \"radio\",\n      id: \"pagamento\",\n      name: \"pagamento\",\n      value: \"dopo\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 41\n      }\n    }, \"Nel caso in cui tu voglia pagare in loco le tasse di soggiorno, o disponga di una esenzione\")))))), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"bottonePrenota\",\n      onClick: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 21\n      }\n    }, \"Prenota e Paga\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"prenota-dx-cont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      id: \"cartaInfo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 29\n      }\n    }, \"INFO PRENOTAZIONE!\"), /*#__PURE__*/React.createElement(Card.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 29\n      }\n    }, \"Riepilogo alloggio\"), /*#__PURE__*/React.createElement(Card.Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 29\n      }\n    }, this.state.dati_casa.tipo_proprieta === 'cv' ? \"Casa vacanza\" : \"B&B\", \" \\xA0\", this.state.dati_casa.nome_proprieta, \",\\xA0\", this.state.dati_casa.localita, \" (\", this.state.dati_casa.provincia, \")\"), /*#__PURE__*/React.createElement(Card.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 29\n      }\n    }, \"Periodo\"), /*#__PURE__*/React.createElement(Card.Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 29\n      }\n    }, this.state.checkIn, \" - \", this.state.checkOut), /*#__PURE__*/React.createElement(Card.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 29\n      }\n    }, \"Numero di ospiti\"), /*#__PURE__*/React.createElement(Card.Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 29\n      }\n    }, this.state.posti, \" \", this.state.posti === 1 ? \"persona\" : \"persone\"), /*#__PURE__*/React.createElement(Card.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 29\n      }\n    }, \"Costo alloggio\"), /*#__PURE__*/React.createElement(Card.Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 29\n      }\n    }, \"\\u20AC\", this.state.dati_casa.costo), /*#__PURE__*/React.createElement(Card.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 29\n      }\n    }, \"Costo tassa di soggiorno\"), /*#__PURE__*/React.createElement(Card.Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 29\n      }\n    }, \"\\u20AC3 per ogni soggiornante\")))));\n  }\n\n}\n\nexport default Prenota;","map":{"version":3,"sources":["C:/Users/alexd/Documents/Progetto-Unipa/Frontend/src/Prenota/Prenota.js"],"names":["React","Form","Col","Button","Accordion","Card","Alert","Redirect","Prenota","Component","constructor","props","onChange","e","setState","target","id","value","setShowSucc","success","setShowErr","error","setShowSuccSogg","successSoggiornante","setShowErrSogg","errorSoggiornante","setShowIncomplete","incomplete","onSubmit","preventDefault","state","pagamento","length","posti","window","scrollTo","i","soggiornanti","data","ref_soggiornante","ref_cliente","localStorage","getItem","ref_proprietario","dati_casa","ref_proprieta","id_proprieta","num_soggiornanti","costo","caparra","data_partenza","checkIn","data_ritorno","checkOut","fetch","method","headers","body","JSON","stringify","then","result","text","apiRespone","parse","status","errorMessage","message","setTimeout","onSubmitSoggiornante","cf","nome","cognome","nascita","Date","toLocaleDateString","res","concat","history","location","numPosti","maxDate","partenza","ritorno","componentDidMount","str1","dmy1","split","date1","offset1","getTimezoneOffset","getTime","str2","dmy2","date2","offset2","toISOString","slice","array","today","offset","render","pathname","fontWeight","map","item","tipo_proprieta","nome_proprieta","localita","provincia"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {Form,Col,Button,Accordion,Card, Alert} from 'react-bootstrap'\r\nimport './Prenota.css'\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nclass Prenota extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            dati_casa: this.props.history.location.state ? this.props.history.location.state.dati_casa : [],\r\n            checkIn: this.props.history.location.state? this.props.history.location.state.checkIn : '',\r\n            checkOut: this.props.history.location.state ? this.props.history.location.state.checkOut : '',\r\n            posti: this.props.history.location.state ? this.props.history.location.state.posti : 1,\r\n            numPosti: [],\r\n            maxDate: '',\r\n            partenza: '',\r\n            ritorno: '',\r\n            pagamento: '',\r\n            cf: '',\r\n            nome: '',\r\n            cognome: '',\r\n            nascita: '',\r\n            soggiornanti: [],\r\n            apiRespone: [],\r\n            error: false,\r\n            errorMessage: '',\r\n            success: false,\r\n            incomplete: false,\r\n            successSoggiornante: false,\r\n            errorSoggiornante: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if(this.state.checkIn !== '' && this.state.checkOut !== '') {\r\n            var str1 = this.state.checkIn;\r\n            var dmy1 = str1.split(\"/\");\r\n            var date1 = new Date(dmy1[2], dmy1[1] - 1, dmy1[0]);\r\n            var offset1 = date1.getTimezoneOffset();\r\n            date1 = new Date(date1.getTime() - (offset1*60*1000));\r\n\r\n            var str2 = this.state.checkOut;\r\n            var dmy2 = str2.split(\"/\");\r\n            var date2 = new Date(dmy2[2], dmy2[1] - 1, dmy2[0]);\r\n            var offset2 = date2.getTimezoneOffset();\r\n            date2 = new Date(date2.getTime() - (offset2*60*1000));\r\n\r\n            this.setState({ \r\n                partenza: date1.toISOString().slice(0,10),\r\n                ritorno: date2.toISOString().slice(0,10)\r\n            });\r\n        }\r\n\r\n        var array = [];\r\n\r\n        for(var i = 0; i < this.state.dati_casa.posti; i++) {\r\n        array[i] = i;\r\n        array[i]++;\r\n        }\r\n\r\n        this.setState({ numPosti: array });\r\n\r\n        var today = new Date();\r\n        const offset = today.getTimezoneOffset()\r\n        today = new Date(today.getTime() - (offset*60*1000))\r\n        \r\n        this.setState({ maxDate: today.toISOString().slice(0,10) })\r\n    }\r\n\r\n    onChange = (e) => {\r\n        this.setState({ [e.target.id]: e.target.value })\r\n    }\r\n\r\n    setShowSucc = (e) => {\r\n        this.setState({ success: e })\r\n    }\r\n\r\n    setShowErr = (e) => {\r\n        this.setState({ error: e })\r\n    }\r\n\r\n    setShowSuccSogg = (e) => {\r\n        this.setState({ successSoggiornante: e })\r\n    }\r\n\r\n    setShowErrSogg = (e) => {\r\n        this.setState({ errorSoggiornante: e })\r\n    }\r\n\r\n    setShowIncomplete = (e) => {\r\n        this.setState({ incomplete: e })\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        if(this.state.pagamento === '' || this.state.length < this.state.posti) {\r\n            window.scrollTo(0, 0);\r\n            this.setState({ incomplete: true });\r\n            return;\r\n        }\r\n\r\n        for(var i = 0; i < this.state.soggiornanti.length; i++) {\r\n            const data = {\r\n                ref_soggiornante: this.state.soggiornanti[i],\r\n                ref_cliente: localStorage.getItem(\"email\"),\r\n                ref_proprietario: this.state.dati_casa.ref_proprietario,\r\n                ref_proprieta: this.state.dati_casa.id_proprieta,\r\n                num_soggiornanti: this.state.posti,\r\n                costo: this.state.pagamento === 'ora' ? (this.state.dati_casa.costo + this.state.posti*3) : this.state.dati_casa.costo,\r\n                caparra: this.state.pagamento === 'ora' ? 0 : this.state.dati_casa.costo,\r\n                data_partenza: this.state.checkIn,\r\n                data_ritorno: this.state.checkOut\r\n            };\r\n        \r\n            fetch('http://192.168.1.106:9000/insertPrenotazione/new', {\r\n                method: \"POST\",\r\n                headers: {\r\n                    'Content-type': 'application/json'\r\n                },\r\n                body: JSON.stringify(data)\r\n            })\r\n            .then((result) => result.text())\r\n            .then((result) => {\r\n                this.setState({ apiRespone: JSON.parse(result) })\r\n        \r\n                if(this.state.apiRespone.status === 'error') {\r\n                    window.scrollTo(0, 0);\r\n                    this.setState({ error: true });\r\n                    this.setState({ errorMessage: this.state.apiRespone.message });\r\n                }\r\n            });\r\n        }  \r\n        if(!this.state.error) {\r\n            window.scrollTo(0, 0);\r\n            this.setState({ success: true, error: false },()=>{\r\n                window.setTimeout(()=>{\r\n                    this.setState({success:false})\r\n                }, 3000)\r\n            }) \r\n        } \r\n    }\r\n\r\n    onSubmitSoggiornante = (e) => {\r\n\r\n        e.preventDefault();\r\n\r\n        const data = {\r\n          cf: this.state.cf,\r\n          nome: this.state.nome,\r\n          cognome: this.state.cognome,\r\n          nascita: new Date(this.state.nascita).toLocaleDateString()\r\n        };\r\n    \r\n        fetch('http://192.168.1.106:9000/insertSoggiornante/new', {\r\n            method: \"POST\",\r\n            headers: {\r\n                'Content-type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n        .then((result) => result.text())\r\n        .then((result) => {\r\n          var res = JSON.parse(result);\r\n    \r\n            if(res.status === 'error') {\r\n                window.scrollTo(0, 0);\r\n                this.setState({ errorSoggiornante: true });\r\n                this.setState({ errorMessage: res.message });\r\n            }\r\n\r\n            else {\r\n                window.scrollTo(0, 0);\r\n                this.setState({\r\n                    successSoggiornante: true,\r\n                    errorSoggiornante: false,\r\n                    soggiornanti: this.state.soggiornanti.concat(this.state.cf)\r\n                }, () => {\r\n                    window.setTimeout(()=>{\r\n                        this.setState({successSoggiornante:false})\r\n                    }, 3000)\r\n                })\r\n            }\r\n        });\r\n    }\r\n    \r\n    render(){\r\n        if(!localStorage.getItem('logged')) {\r\n            return <Redirect\r\n                to={{\r\n                    pathname: \"/ErrorPage\",\r\n                    state: { \r\n                        error: true,\r\n                        errorMessage: \"Utente non autorizzato\" \r\n                    }\r\n                }}\r\n            />\r\n        }\r\n\r\n        return(\r\n            <div className=\"prenota-cont\">\r\n                <>\r\n                    <Alert show={this.state.incomplete} variant=\"danger\">\r\n                    <Alert.Heading style = {{fontWeight: 'bold'}}>Dati non completi!</Alert.Heading>\r\n                    <p>\r\n                        Non tutti i campi risultano essere compilati correttamente &nbsp;\r\n                        Inserisci tutti i dati necessari per proseguire\r\n                    </p>\r\n                    <hr />\r\n                    <div className=\"d-flex justify-content-end\">\r\n                        <Button onClick={() => this.setShowIncomplete(false)} variant=\"outline-success\">\r\n                        <span style = {{fontWeight: 'bold'}}>Ok</span>\r\n                        </Button>\r\n                    </div>\r\n                    </Alert>\r\n                </>\r\n                <>\r\n                    <Alert show={this.state.success} variant=\"success\">\r\n                    <Alert.Heading style = {{fontWeight: 'bold'}}>Prenotazione avvenuta con successo!</Alert.Heading>\r\n                    <p>\r\n                        Il pagamento è avvenuto correttamente <br/>\r\n                        Le informazioni della tua prenotazione sono state prese in carico dal sistema e verranno presto inoltrate al\r\n                        gestore della struttura\r\n                    </p>\r\n                    <hr />\r\n                    <div className=\"d-flex justify-content-end\">\r\n                        <Button onClick={() => this.setShowSucc(false)} variant=\"outline-success\">\r\n                        <span style = {{fontWeight: 'bold'}}>Ok</span>\r\n                        </Button>\r\n                    </div>\r\n                    </Alert>\r\n                </>\r\n                <>\r\n                    <Alert show={this.state.error} variant=\"danger\">\r\n                    <Alert.Heading style = {{fontWeight: 'bold'}}>Prenotazione non avvenuta!</Alert.Heading>\r\n                    <p>\r\n                        Si è verificato un errore nell'inserimento dei dati, provare a ricompilare i campi\r\n                    </p>\r\n                    <hr />\r\n                    <div className=\"d-flex justify-content-end\">\r\n                        <Button onClick={() => this.setShowErr(false)} variant=\"outline-success\">\r\n                        <span style = {{fontWeight: 'bold'}}>Ok</span>\r\n                        </Button>\r\n                    </div>\r\n                    </Alert>\r\n                </>\r\n                <>\r\n                    <Alert show={this.state.successSoggiornante} variant=\"success\">\r\n                    <Alert.Heading style = {{fontWeight: 'bold'}}>Soggiornante registrato con successo!</Alert.Heading>\r\n                    <p>\r\n                        Le informazioni del soggiornante sono state correttamente caricate all'interno del sistema. &nbsp;\r\n                        Compila le informazioni degli altri soggiornanti, se presenti\r\n                    </p>\r\n                    <hr />\r\n                    <div className=\"d-flex justify-content-end\">\r\n                        <Button onClick={() => this.setShowSuccSogg(false)} variant=\"outline-success\">\r\n                        <span style = {{fontWeight: 'bold'}}>Ok</span>\r\n                        </Button>\r\n                    </div>\r\n                    </Alert>\r\n                </>\r\n                <>\r\n                    <Alert show={this.state.errorSoggiornante} variant=\"danger\">\r\n                    <Alert.Heading style = {{fontWeight: 'bold'}}>Soggiornante non registrato!</Alert.Heading>\r\n                    <p>\r\n                        Si è verificato un errore nell'inserimento dei dati, provare a ricompilare i campi\r\n                    </p>\r\n                    <hr />\r\n                    <div className=\"d-flex justify-content-end\">\r\n                        <Button onClick={() => this.setShowErrSogg(false)} variant=\"outline-success\">\r\n                        <span style = {{fontWeight: 'bold'}}>Ok</span>\r\n                        </Button>\r\n                    </div>\r\n                    </Alert>\r\n                </>\r\n                <div className=\"prenota-sx-cont\">\r\n                    <h3>Conferma la tua prenotazione</h3>\r\n                    <div className=\"infoviaggio\">\r\n                    <h5>Info viaggio</h5>\r\n                    <Accordion>\r\n                        <div className=\"headaccpren\">\r\n                            <p>Date:</p>\r\n                            <Accordion.Toggle  eventKey=\"0\" id=\"modifica\">\r\n                                Visualizza\r\n                            </Accordion.Toggle>\r\n                        </div>\r\n                            <Accordion.Collapse eventKey=\"0\">\r\n                                <div>\r\n                            <Form id=\"prenotaForm\">\r\n                                <Form.Row>\r\n                                    <Form.Group as={Col} controlId=\"formGridDate\">\r\n                                        <Form.Label>Check-In</Form.Label>\r\n                                        <Form.Control \r\n                                            type=\"date\" \r\n                                            placeholder=\"Inserisci data di inizio\" \r\n                                            id = 'data_partenza'\r\n                                            name = 'data_partenza'\r\n                                            value = {this.state.partenza}\r\n                                            disabled = \"true\"\r\n                                        />\r\n                                    </Form.Group>\r\n                                    <Form.Group as={Col} controlId=\"formGridDate1\">\r\n                                        <Form.Label>Check-Out</Form.Label>\r\n                                        <Form.Control \r\n                                            type=\"date\" \r\n                                            placeholder=\"Inserisci data di fine\" \r\n                                            id = 'data_ritorno'\r\n                                            name = 'data_ritorno'\r\n                                            value = {this.state.ritorno}\r\n                                            disabled = \"true\"\r\n                                        />\r\n                                    </Form.Group>\r\n                                </Form.Row>\r\n                            </Form>\r\n                                </div>\r\n                            </Accordion.Collapse>\r\n                        <div className=\"headaccpren\">\r\n                            <p>Numero ospiti: </p>\r\n                            <Accordion.Toggle eventKey=\"1\" id=\"modifica\">\r\n                                Modifica\r\n                            </Accordion.Toggle>\r\n                        </div>\r\n                        <Accordion.Collapse eventKey=\"1\">\r\n                        <Form id=\"prenotaFormOspiti\">\r\n                        <Form.Group as={Col} controlId=\"formGridDate\">\r\n                        <Form.Label>Ospiti</Form.Label>\r\n                            <Form.Control as=\"select\" onChange = {this.onChange} id=\"posti\" value = {this.state.posti}>\r\n                                {this.state.numPosti.map(item => (\r\n                                <option value = {item} id = \"posti\">{item}</option>\r\n                                ))}\r\n                            </Form.Control>\r\n                        </Form.Group>\r\n                        </Form>\r\n                        </Accordion.Collapse>\r\n                        <div className=\"headaccpren\">\r\n                            <p>Dati dei soggiornanti: </p>\r\n                            <Accordion.Toggle eventKey=\"2\" id=\"modifica\">\r\n                                Compila\r\n                            </Accordion.Toggle>\r\n                        </div>\r\n                        <Accordion.Collapse eventKey=\"2\">\r\n                        <Form id=\"prenotaFormOspiti\">\r\n                        <Form.Group as={Col} controlId=\"formGridDate\">\r\n                            {this.state.numPosti.map(item => (\r\n                                <div>\r\n                                    <Form.Label>Soggiornante {item}</Form.Label>\r\n                                    <Form.Control as = \"input\" placeholder = \"Codice fiscale\" id = \"cf\" onChange = {this.onChange}/>\r\n                                    <br />\r\n                                    <Form.Control as = \"input\" placeholder = \"Nome\" id = \"nome\" onChange = {this.onChange}/>\r\n                                    <br />\r\n                                    <Form.Control as = \"input\" placeholder = \"Cognome\" id = \"cognome\" onChange = {this.onChange}/>\r\n                                    <br />\r\n                                    <Form.Control type = \"date\" max = {this.state.maxDate} placeholder = \"Data di nascita\" id = \"nascita\" onChange = {this.onChange}/>\r\n                                    <br />\r\n                                    <button className = \"bottonePrenota\" onClick = {this.onSubmitSoggiornante}>Registra soggiornante</button>\r\n                                </div>\r\n                            ))}\r\n                        </Form.Group>\r\n                        </Form>\r\n                        </Accordion.Collapse>\r\n                    </Accordion>\r\n                        <div>\r\n                            <h4>Scegli come pagare</h4>\r\n                            <div className=\"containerPaga\">\r\n                                    <div className=\"paga\">\r\n                                        <h5>Paga per intero</h5>\r\n                                        <div className=\"row-flex\">\r\n                                            <Form.Check inline label=\"Paga adesso\" type=\"radio\" id=\"pagamento\" name = \"pagamento\" value = \"ora\" onChange = {this.onChange}/>\r\n                                            <p>Nel caso in cui tu voglia pagare già adesso le tasse di soggiorno</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"paga\">\r\n                                        <h5>Paga una parte</h5>\r\n                                        <div className=\"row-flex\">\r\n                                        <Form.Check inline label=\"Paga dopo\" type=\"radio\" id=\"pagamento\" name = \"pagamento\" value = \"dopo\" onChange = {this.onChange}/>\r\n                                        <p>Nel caso in cui tu voglia pagare in loco le tasse di soggiorno, o disponga di una esenzione</p>\r\n                                        </div>\r\n                                    </div>\r\n                            </div>\r\n                        </div>\r\n                    </div> \r\n                    <button className=\"bottonePrenota\" onClick = {this.onSubmit}>Prenota e Paga</button>    \r\n                </div>\r\n                <div className=\"prenota-dx-cont\">\r\n                    <Card id=\"cartaInfo\">\r\n                        <Card.Body>\r\n                            <h3>INFO PRENOTAZIONE!</h3>\r\n                            <Card.Title>Riepilogo alloggio</Card.Title>\r\n                            <Card.Text>\r\n                                {this.state.dati_casa.tipo_proprieta === 'cv' ? \"Casa vacanza\" : \"B&B\"} &nbsp;\r\n                                {this.state.dati_casa.nome_proprieta},&nbsp;\r\n                                {this.state.dati_casa.localita} ({this.state.dati_casa.provincia})\r\n                            </Card.Text>\r\n                            <Card.Title>Periodo</Card.Title>\r\n                            <Card.Text>{this.state.checkIn} - {this.state.checkOut}</Card.Text>\r\n                            <Card.Title>Numero di ospiti</Card.Title>\r\n                            <Card.Text>{this.state.posti} {this.state.posti === 1 ? \"persona\" : \"persone\"}</Card.Text>\r\n                            <Card.Title>Costo alloggio</Card.Title>\r\n                            <Card.Text>€{this.state.dati_casa.costo}</Card.Text>\r\n                            <Card.Title>Costo tassa di soggiorno</Card.Title>\r\n                            <Card.Text>€3 per ogni soggiornante</Card.Text>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default Prenota;"]},"metadata":{},"sourceType":"module"}