{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexd\\\\Documents\\\\Progetto-Unipa\\\\Frontend\\\\src\\\\GestioneProprietario\\\\ProprietarioPage.js\";\nimport React from 'react';\nimport { Card, Modal, Button } from 'react-bootstrap'; //import {Nav, CardColumns} from 'react-bootstrap'\n\nimport './ProprietarioPage.css';\nimport { SiCashapp } from \"react-icons/si\";\nimport { RiAccountBoxLine } from \"react-icons/ri\";\nimport { AiFillCheckSquare } from \"react-icons/ai\";\nimport { FaHotel } from \"react-icons/fa\";\nimport { RiMailSendLine } from \"react-icons/ri\";\nimport { FaClipboardList } from \"react-icons/fa\";\nimport { BsTools } from \"react-icons/bs\";\nimport { Link } from 'react-router-dom';\nimport { Redirect } from \"react-router-dom\";\n\nclass ProprietarioPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClose = () => {\n      this.setState({\n        show: false\n      });\n    };\n\n    this.handleShow = () => {\n      this.setState({\n        show: true\n      });\n    };\n\n    this.state = {\n      email: localStorage.getItem('email'),\n      apiResponse: [],\n      tasseInvio: [],\n      error: false,\n      errorMessage: '',\n      show: false,\n      empty: false\n    };\n  }\n\n  componentDidMount() {\n    const data = {\n      email: this.state.email\n    };\n    fetch('http://localhost:9000/getDataInvio/dataInvio', {\n      method: 'POST',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(result => result.text()).then(result => {\n      this.setState({\n        apiResponse: JSON.parse(result)\n      });\n      var res = JSON.parse(result);\n\n      if (res.length < 1 || res.code && res.code === 404) {\n        this.setState({\n          empty: true,\n          errorMessage: res.message\n        });\n      } else if (this.state.apiResponse.status === 'error') {\n        this.setState({\n          error: true\n        });\n        this.setState({\n          errorMessage: this.state.apiResponse.message\n        });\n      }\n    });\n    const data2 = {\n      ref_proprietario: this.state.email\n    };\n    fetch('http://localhost:9000/getTasseInvio/tasse', {\n      method: 'POST',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(data2)\n    }).then(result => result.text()).then(result => {\n      this.setState({\n        tasseInvio: JSON.parse(result)\n      });\n      var res = JSON.parse(result);\n\n      if (res.length < 1 || res.code && res.code === 404) {\n        this.setState({\n          empty: true,\n          errorMessage: res.message\n        });\n      } else if (this.state.tasseInvio.status === 'error') {\n        this.setState({\n          error: true\n        });\n        this.setState({\n          errorMessage: this.state.tasseInvio.message\n        });\n      }\n    });\n  }\n\n  render() {\n    var data_invio = this.state.apiResponse[0] ? new Date(this.state.apiResponse[0].ultimo_invio_dati).toLocaleDateString() : \"Mai inviati\";\n    var tasseInvio = this.state.tasseInvio[0] ? this.state.tasseInvio : [];\n    var datiTurismo = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"turismocont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }\n    }, \"Ultimo invio dei dati all'ufficio competente: \", /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 98\n      }\n    }, data_invio)), tasseInvio.map((tassa, key) => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 25\n      }\n    }, \"Soggiornante: \", tassa.ref_soggiornante), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 25\n      }\n    }, \"Periodo: \", new Date(tassa.data_partenza).toLocaleDateString(), \"-\", new Date(tassa.data_ritorno).toLocaleDateString()), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 25\n      }\n    }, \"Ammontare: \\u20AC\", tassa.ammontare))), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        fontWeight: 'bold'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }, \"Desideri inviare i dati nuovamente?\"));\n\n    if (!localStorage.getItem('logged') || !localStorage.getItem('proprietario')) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/ErrorPage\",\n          state: {\n            error: true,\n            errorMessage: \"Utente non autorizzato\"\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 20\n        }\n      });\n    } else if (this.state.errorMessage) {\n      datiTurismo = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"turismocont\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }\n      }, \"Si \\xE8 verificato un errore: \", this.state.errorMessage));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"GestioneProprietario\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"carte_prop\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/Testina\",\n      className: \"LinK\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      id: \"prop\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FaClipboardList, {\n      className: \"imageProp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(Card.Title, {\n      className: \"TitoloCard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 33\n      }\n    }, \"Gestisci Prenotazioni\"), /*#__PURE__*/React.createElement(Card.Text, {\n      className: \"TestoCard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 33\n      }\n    }, \"Gestisci le prenotazioni in attesa e quelle gi\\xE0 accettate.\"))), /*#__PURE__*/React.createElement(Card, {\n      id: \"prop\",\n      onClick: this.handleShow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(RiMailSendLine, {\n      className: \"imageProp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(Card.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 33\n      }\n    }, \"Invio dati Turismo \"), /*#__PURE__*/React.createElement(Card.Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 33\n      }\n    }, \"Effettua l'invio dei dati relativi ai soggiornanti all'ufficio del turismo.\")), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.show,\n      onHide: this.handleClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      closeButton: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 41\n      }\n    }, \"Invio dati all'ufficio del turismo\")), /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 49\n      }\n    }, datiTurismo), /*#__PURE__*/React.createElement(Modal.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"secondary\"\n      /*funzione invia dationClick={}*/\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 41\n      }\n    }, \"Invia dati\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.handleClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 41\n      }\n    }, \"Chiudi\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"carte_prop\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/InserimentoPropriet\\xE0\",\n      className: \"LinK\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      id: \"prop\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FaHotel, {\n      className: \"imageProp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(Card.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 33\n      }\n    }, \"Inserisci Propriet\\xE0\"), /*#__PURE__*/React.createElement(Card.Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 33\n      }\n    }, \"Scegli tra le tipologie di strutture presenti nel sistema e inserisci la tua! \"))), /*#__PURE__*/React.createElement(Link, {\n      to: \"/SceltaModifica\",\n      className: \"LinK\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      id: \"prop\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(BsTools, {\n      className: \"imageProp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(Card.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 33\n      }\n    }, \"Modifica Propriet\\xE0\"), /*#__PURE__*/React.createElement(Card.Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 33\n      }\n    }, \"Scegli tra le strutture possedute ed effettua i cambiamenti che preferisci.\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"carte_prop\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/DatiPersonali\",\n      className: \"LinK\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      id: \"prop\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(RiAccountBoxLine, {\n      className: \"imageProp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(Card.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 33\n      }\n    }, \"Gestione Account\"), /*#__PURE__*/React.createElement(Card.Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 33\n      }\n    }, \"Vedi le opzioni disponibili\"))), /*#__PURE__*/React.createElement(Link, {\n      to: \"/Earning\",\n      className: \"LinK\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      id: \"prop\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(SiCashapp, {\n      className: \"imageProp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(Card.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 37\n      }\n    }, \"Resoconto Guadagni\"), /*#__PURE__*/React.createElement(Card.Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 37\n      }\n    }, \"Visualizza \")))));\n  }\n\n}\n\nexport default ProprietarioPage;","map":{"version":3,"sources":["C:/Users/alexd/Documents/Progetto-Unipa/Frontend/src/GestioneProprietario/ProprietarioPage.js"],"names":["React","Card","Modal","Button","SiCashapp","RiAccountBoxLine","AiFillCheckSquare","FaHotel","RiMailSendLine","FaClipboardList","BsTools","Link","Redirect","ProprietarioPage","Component","constructor","props","handleClose","setState","show","handleShow","state","email","localStorage","getItem","apiResponse","tasseInvio","error","errorMessage","empty","componentDidMount","data","fetch","method","headers","body","JSON","stringify","then","result","text","parse","res","length","code","message","status","data2","ref_proprietario","render","data_invio","Date","ultimo_invio_dati","toLocaleDateString","datiTurismo","fontWeight","color","map","tassa","key","ref_soggiornante","data_partenza","data_ritorno","ammontare","pathname"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,IAAR,EAAcC,KAAd,EAAqBC,MAArB,QAAkC,iBAAlC,C,CACA;;AACA,OAAO,wBAAP;AACA,SAAQC,SAAR,QAAwB,gBAAxB;AACA,SAAQC,gBAAR,QAA+B,gBAA/B;AACA,SAAQC,iBAAR,QAAgC,gBAAhC;AACA,SAAQC,OAAR,QAAsB,gBAAtB;AACA,SAAQC,cAAR,QAA6B,gBAA7B;AACA,SAAQC,eAAR,QAA8B,gBAA9B;AACA,SAAQC,OAAR,QAAsB,gBAAtB;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AAEA,SAASC,QAAT,QAAyB,kBAAzB;;AAGA,MAAMC,gBAAN,SAA+Bb,KAAK,CAACc,SAArC,CAA+C;AAE3CC,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;;AADc,SAoElBC,WApEkB,GAoEJ,MAAM;AAChB,WAAKC,QAAL,CAAc;AACVC,QAAAA,IAAI,EAAE;AADI,OAAd;AAGH,KAxEiB;;AAAA,SA0ElBC,UA1EkB,GA0EL,MAAM;AACf,WAAKF,QAAL,CAAc;AACVC,QAAAA,IAAI,EAAE;AADI,OAAd;AAGH,KA9EiB;;AAGd,SAAKE,KAAL,GAAa;AACTC,MAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADE;AAETC,MAAAA,WAAW,EAAE,EAFJ;AAGTC,MAAAA,UAAU,EAAE,EAHH;AAITC,MAAAA,KAAK,EAAE,KAJE;AAKTC,MAAAA,YAAY,EAAE,EALL;AAMTT,MAAAA,IAAI,EAAE,KANG;AAOTU,MAAAA,KAAK,EAAE;AAPE,KAAb;AASH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB,UAAMC,IAAI,GAAG;AACTT,MAAAA,KAAK,EAAE,KAAKD,KAAL,CAAWC;AADT,KAAb;AAIAU,IAAAA,KAAK,CAAC,8CAAD,EAAgD;AACjDC,MAAAA,MAAM,EAAE,MADyC;AAEjDC,MAAAA,OAAO,EAAE;AACL,wBAAe;AADV,OAFwC;AAKjDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeN,IAAf;AAL2C,KAAhD,CAAL,CAOCO,IAPD,CAOOC,MAAD,IAAUA,MAAM,CAACC,IAAP,EAPhB,EAQCF,IARD,CAQOC,MAAD,IAAU;AACZ,WAAKrB,QAAL,CAAc;AAAEO,QAAAA,WAAW,EAACW,IAAI,CAACK,KAAL,CAAWF,MAAX;AAAd,OAAd;AACA,UAAIG,GAAG,GAAGN,IAAI,CAACK,KAAL,CAAWF,MAAX,CAAV;;AAEA,UAAGG,GAAG,CAACC,MAAJ,GAAa,CAAb,IAAmBD,GAAG,CAACE,IAAJ,IAAYF,GAAG,CAACE,IAAJ,KAAa,GAA/C,EAAqD;AACnD,aAAK1B,QAAL,CAAc;AAAEW,UAAAA,KAAK,EAAE,IAAT;AAAeD,UAAAA,YAAY,EAAEc,GAAG,CAACG;AAAjC,SAAd;AACD,OAFD,MAIK,IAAG,KAAKxB,KAAL,CAAWI,WAAX,CAAuBqB,MAAvB,KAAkC,OAArC,EAA8C;AACjD,aAAK5B,QAAL,CAAc;AAAES,UAAAA,KAAK,EAAE;AAAT,SAAd;AACA,aAAKT,QAAL,CAAc;AAAEU,UAAAA,YAAY,EAAE,KAAKP,KAAL,CAAWI,WAAX,CAAuBoB;AAAvC,SAAd;AACD;AACJ,KApBD;AAsBA,UAAME,KAAK,GAAG;AACVC,MAAAA,gBAAgB,EAAE,KAAK3B,KAAL,CAAWC;AADnB,KAAd;AAIAU,IAAAA,KAAK,CAAC,2CAAD,EAA6C;AAC9CC,MAAAA,MAAM,EAAE,MADsC;AAE9CC,MAAAA,OAAO,EAAE;AACL,wBAAe;AADV,OAFqC;AAK9CC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeU,KAAf;AALwC,KAA7C,CAAL,CAOCT,IAPD,CAOOC,MAAD,IAAUA,MAAM,CAACC,IAAP,EAPhB,EAQCF,IARD,CAQOC,MAAD,IAAU;AACZ,WAAKrB,QAAL,CAAc;AAAEQ,QAAAA,UAAU,EAACU,IAAI,CAACK,KAAL,CAAWF,MAAX;AAAb,OAAd;AACA,UAAIG,GAAG,GAAGN,IAAI,CAACK,KAAL,CAAWF,MAAX,CAAV;;AAEA,UAAGG,GAAG,CAACC,MAAJ,GAAa,CAAb,IAAmBD,GAAG,CAACE,IAAJ,IAAYF,GAAG,CAACE,IAAJ,KAAa,GAA/C,EAAqD;AACnD,aAAK1B,QAAL,CAAc;AAAEW,UAAAA,KAAK,EAAE,IAAT;AAAeD,UAAAA,YAAY,EAAEc,GAAG,CAACG;AAAjC,SAAd;AACD,OAFD,MAIK,IAAG,KAAKxB,KAAL,CAAWK,UAAX,CAAsBoB,MAAtB,KAAiC,OAApC,EAA6C;AAChD,aAAK5B,QAAL,CAAc;AAAES,UAAAA,KAAK,EAAE;AAAT,SAAd;AACA,aAAKT,QAAL,CAAc;AAAEU,UAAAA,YAAY,EAAE,KAAKP,KAAL,CAAWK,UAAX,CAAsBmB;AAAtC,SAAd;AACD;AACJ,KApBD;AAqBH;;AAcDI,EAAAA,MAAM,GAAG;AACL,QAAIC,UAAU,GAAG,KAAK7B,KAAL,CAAWI,WAAX,CAAuB,CAAvB,IAA4B,IAAI0B,IAAJ,CAAS,KAAK9B,KAAL,CAAWI,WAAX,CAAuB,CAAvB,EAA0B2B,iBAAnC,EAAsDC,kBAAtD,EAA5B,GAAyG,aAA1H;AACA,QAAI3B,UAAU,GAAG,KAAKL,KAAL,CAAWK,UAAX,CAAsB,CAAtB,IAA2B,KAAKL,KAAL,CAAWK,UAAtC,GAAmD,EAApE;AAEA,QAAI4B,WAAW,gBACX;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAI,MAAA,KAAK,EAAI;AAACC,QAAAA,UAAU,EAAE;AAAb,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sEAAiF;AAAM,MAAA,KAAK,EAAI;AAACC,QAAAA,KAAK,EAAE;AAAR,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAgCN,UAAhC,CAAjF,CADJ,EAEKxB,UAAU,CAAC+B,GAAX,CAAe,CAACC,KAAD,EAAQC,GAAR,kBACZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAkBD,KAAK,CAACE,gBAAxB,CADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAa,IAAIT,IAAJ,CAASO,KAAK,CAACG,aAAf,EAA8BR,kBAA9B,EAAb,OAAkE,IAAIF,IAAJ,CAASO,KAAK,CAACI,YAAf,EAA6BT,kBAA7B,EAAlE,CAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAgBK,KAAK,CAACK,SAAtB,CAHJ,CADH,CAFL,eASI;AAAG,MAAA,KAAK,EAAI;AAACR,QAAAA,UAAU,EAAE;AAAb,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CATJ,CADJ;;AAcA,QAAG,CAAChC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAD,IAAmC,CAACD,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAvC,EAA6E;AACzE,0BAAO,oBAAC,QAAD;AACH,QAAA,EAAE,EAAE;AACAwC,UAAAA,QAAQ,EAAE,YADV;AAEA3C,UAAAA,KAAK,EAAE;AACHM,YAAAA,KAAK,EAAE,IADJ;AAEHC,YAAAA,YAAY,EAAE;AAFX;AAFP,SADD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AASH,KAVD,MAWK,IAAG,KAAKP,KAAL,CAAWO,YAAd,EAA4B;AAC7B0B,MAAAA,WAAW,gBACP;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAA+B,KAAKjC,KAAL,CAAWO,YAA1C,CADJ,CADJ;AAKH;;AAED,wBACI;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACQ;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAG,UAAX;AAAsB,MAAA,SAAS,EAAC,MAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,MAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,eAAD;AAAiB,MAAA,SAAS,EAAC,WAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,SAAS,EAAC,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAFJ,eAGI,oBAAC,IAAD,CAAM,IAAN;AAAW,MAAA,SAAS,EAAC,WAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uEAHJ,CADJ,CADJ,eAQQ,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,MAAT;AAAgB,MAAA,OAAO,EAAI,KAAKR,UAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,cAAD;AAAgB,MAAA,SAAS,EAAC,WAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAFJ,eAGI,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qFAHJ,CARR,eAaY,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAE,KAAKC,KAAL,CAAWF,IAAxB;AAA8B,MAAA,MAAM,EAAE,KAAKF,WAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD,CAAO,MAAP;AAAc,MAAA,WAAW,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CADJ,CADJ,eAIgB,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKqC,WADL,CAJhB,eAOI,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC;AAAY;AAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,WAAhB;AAA4B,MAAA,OAAO,EAAE,KAAKrC,WAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,CAPJ,CAbZ,CADR,eA6BQ;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAG,0BAAX;AAAmC,MAAA,SAAS,EAAC,MAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,MAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,OAAD;AAAS,MAAA,SAAS,EAAC,WAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAFJ,eAGI,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wFAHJ,CADJ,CADJ,eAQI,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAG,iBAAX;AAA6B,MAAA,SAAS,EAAC,MAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD;AAAO,MAAA,EAAE,EAAC,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,OAAD;AAAS,MAAA,SAAS,EAAC,WAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAFJ,eAGI,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qFAHJ,CADJ,CARJ,CA7BR,eA6CQ;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAG,gBAAX;AAA4B,MAAA,SAAS,EAAC,MAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,MAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,gBAAD;AAAkB,MAAA,SAAS,EAAC,WAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFJ,eAGI,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAHJ,CADJ,CADJ,eAQQ,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAG,UAAX;AAAsB,MAAA,SAAS,EAAC,MAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,MAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAC,WAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,eAEI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAFJ,eAGI,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAHJ,CADJ,CARR,CA7CR,CADJ;AAgEH;;AAvL0C;;AA0L/C,eAAeJ,gBAAf","sourcesContent":["import React from 'react';\r\nimport {Card, Modal, Button} from 'react-bootstrap'\r\n//import {Nav, CardColumns} from 'react-bootstrap'\r\nimport './ProprietarioPage.css'\r\nimport {SiCashapp} from \"react-icons/si\"\r\nimport {RiAccountBoxLine} from \"react-icons/ri\"\r\nimport {AiFillCheckSquare} from \"react-icons/ai\"\r\nimport {FaHotel} from \"react-icons/fa\"\r\nimport {RiMailSendLine} from \"react-icons/ri\"\r\nimport {FaClipboardList} from \"react-icons/fa\"\r\nimport {BsTools} from \"react-icons/bs\"\r\nimport {Link} from 'react-router-dom'\r\n\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\n\r\nclass ProprietarioPage extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            email: localStorage.getItem('email'),\r\n            apiResponse: [],\r\n            tasseInvio: [],\r\n            error: false,\r\n            errorMessage: '',\r\n            show: false,\r\n            empty: false\r\n        }\r\n    }\r\n    \r\n    componentDidMount() {\r\n        const data = {\r\n            email: this.state.email\r\n        };\r\n\r\n        fetch('http://localhost:9000/getDataInvio/dataInvio',{\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type':'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n        .then((result)=>result.text())\r\n        .then((result)=>{\r\n            this.setState({ apiResponse:JSON.parse(result) });\r\n            var res = JSON.parse(result);\r\n\r\n            if(res.length < 1 || (res.code && res.code === 404)) {\r\n              this.setState({ empty: true, errorMessage: res.message });\r\n            }\r\n      \r\n            else if(this.state.apiResponse.status === 'error') {\r\n              this.setState({ error: true });\r\n              this.setState({ errorMessage: this.state.apiResponse.message });\r\n            }\r\n        })\r\n\r\n        const data2 = {\r\n            ref_proprietario: this.state.email\r\n        };\r\n\r\n        fetch('http://localhost:9000/getTasseInvio/tasse',{\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type':'application/json'\r\n            },\r\n            body: JSON.stringify(data2)\r\n        })\r\n        .then((result)=>result.text())\r\n        .then((result)=>{\r\n            this.setState({ tasseInvio:JSON.parse(result) });\r\n            var res = JSON.parse(result);\r\n\r\n            if(res.length < 1 || (res.code && res.code === 404)) {\r\n              this.setState({ empty: true, errorMessage: res.message });\r\n            }\r\n      \r\n            else if(this.state.tasseInvio.status === 'error') {\r\n              this.setState({ error: true });\r\n              this.setState({ errorMessage: this.state.tasseInvio.message });\r\n            }\r\n        })\r\n    }\r\n\r\n    handleClose = () => {\r\n        this.setState({\r\n            show: false\r\n        });\r\n    }\r\n    \r\n    handleShow = () => {\r\n        this.setState({\r\n            show: true\r\n        });\r\n    }\r\n\r\n    render() {\r\n        var data_invio = this.state.apiResponse[0] ? new Date(this.state.apiResponse[0].ultimo_invio_dati).toLocaleDateString() : \"Mai inviati\";\r\n        var tasseInvio = this.state.tasseInvio[0] ? this.state.tasseInvio : [];\r\n\r\n        var datiTurismo = (\r\n            <div className=\"turismocont\">\r\n                <h6 style = {{fontWeight: 'bold'}}>Ultimo invio dei dati all'ufficio competente: <span style = {{color: 'red'}}>{data_invio}</span></h6>\r\n                {tasseInvio.map((tassa, key) => (\r\n                    <div>\r\n                        <p>Soggiornante: {tassa.ref_soggiornante}</p>\r\n                        <p>Periodo: {new Date(tassa.data_partenza).toLocaleDateString()}-{new Date(tassa.data_ritorno).toLocaleDateString()}</p>\r\n                        <p>Ammontare: €{tassa.ammontare}</p>\r\n                    </div>\r\n                ))}\r\n                <p style = {{fontWeight: 'bold'}}>Desideri inviare i dati nuovamente?</p>\r\n            </div>\r\n        );\r\n    \r\n        if(!localStorage.getItem('logged') || !localStorage.getItem('proprietario')) {\r\n            return <Redirect\r\n                to={{\r\n                    pathname: \"/ErrorPage\",\r\n                    state: { \r\n                        error: true,\r\n                        errorMessage: \"Utente non autorizzato\" \r\n                    }\r\n                }}\r\n            />\r\n        }\r\n        else if(this.state.errorMessage) {\r\n            datiTurismo = (\r\n                <div className=\"turismocont\">\r\n                    <p>Si è verificato un errore: {this.state.errorMessage}</p>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return(\r\n            <div className=\"GestioneProprietario\">\r\n                    <div className=\"carte_prop\" >\r\n                        <Link to = \"/Testina\" className=\"LinK\">\r\n                            <Card id=\"prop\">\r\n                                <FaClipboardList className=\"imageProp\"/>\r\n                                <Card.Title className=\"TitoloCard\">Gestisci Prenotazioni</Card.Title>\r\n                                <Card.Text className=\"TestoCard\">Gestisci le prenotazioni in attesa e quelle già accettate.</Card.Text>\r\n                            </Card>\r\n                        </Link>\r\n                            <Card id=\"prop\" onClick = {this.handleShow}>\r\n                                <RiMailSendLine className=\"imageProp\"/>\r\n                                <Card.Title>Invio dati Turismo </Card.Title>\r\n                                <Card.Text>Effettua l'invio dei dati relativi ai soggiornanti all'ufficio del turismo.</Card.Text>\r\n                            </Card>\r\n                                <Modal show={this.state.show} onHide={this.handleClose}>\r\n                                    <Modal.Header closeButton>\r\n                                        <Modal.Title>Invio dati all'ufficio del turismo</Modal.Title>\r\n                                            </Modal.Header>\r\n                                                <Modal.Body>\r\n                                                    {datiTurismo}\r\n                                                </Modal.Body>\r\n                                    <Modal.Footer>\r\n                                        <Button variant=\"secondary\" /*funzione invia dationClick={}*/>Invia dati</Button>\r\n                                        <Button variant=\"secondary\" onClick={this.handleClose}>\r\n                                            Chiudi\r\n                                        </Button>                    \r\n                                    </Modal.Footer>\r\n                                </Modal>\r\n                    </div>\r\n                    <div className=\"carte_prop\">\r\n                        <Link to = \"/InserimentoProprietà\" className=\"LinK\">\r\n                            <Card id=\"prop\">\r\n                                <FaHotel className=\"imageProp\"/>\r\n                                <Card.Title>Inserisci Proprietà</Card.Title>\r\n                                <Card.Text>Scegli tra le tipologie di strutture presenti nel sistema e inserisci la tua! </Card.Text>\r\n                            </Card>\r\n                        </Link>\r\n                        <Link to = \"/SceltaModifica\" className=\"LinK\">\r\n                            <Card  id=\"prop\">\r\n                                <BsTools className=\"imageProp\"/>\r\n                                <Card.Title>Modifica Proprietà</Card.Title>\r\n                                <Card.Text>Scegli tra le strutture possedute ed effettua i cambiamenti che preferisci.</Card.Text>\r\n                            </Card>\r\n                        </Link>\r\n                    </div>\r\n                    <div className=\"carte_prop\">\r\n                        <Link to = \"/DatiPersonali\" className=\"LinK\">\r\n                            <Card id=\"prop\">\r\n                                <RiAccountBoxLine className=\"imageProp\" />\r\n                                <Card.Title>Gestione Account</Card.Title>\r\n                                <Card.Text>Vedi le opzioni disponibili</Card.Text>\r\n                            </Card>\r\n                            </Link>\r\n                            <Link to = \"/Earning\" className=\"LinK\">\r\n                                <Card id=\"prop\">\r\n                                <SiCashapp className=\"imageProp\" />\r\n                                    <Card.Title>Resoconto Guadagni</Card.Title>\r\n                                    <Card.Text>Visualizza </Card.Text>\r\n                                </Card>\r\n                            </Link>\r\n                        </div>\r\n                </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ProprietarioPage;\r\n\r\n"]},"metadata":{},"sourceType":"module"}