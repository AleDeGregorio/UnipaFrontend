{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexd\\\\Documents\\\\Progetto-Unipa\\\\Frontend\\\\src\\\\GestioneProprietario\\\\InserisciProp\\\\InserimentoStanzaBnB.js\";\n\n/*CSS FATTO*/\nimport React from \"react\";\nimport { Button, Form } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport \"./InserimentoProprietà.css\";\nimport { Redirect } from 'react-router-dom';\n\nclass InserimentoStanzaBnB extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.onChangeFoto = e => {\n      this.setState({\n        [e.target.name]: URL.createObjectURL(e.target.files[0])\n      });\n      this.setState({\n        [e.target.id]: e.target.files[0]\n      });\n    };\n\n    this.onSubmitInsert = e => {\n      e.preventDefault();\n      const data1 = {\n        nome_proprieta: this.state.nome_proprieta,\n        indirizzo: this.state.indirizzo,\n        localita: this.state.localita,\n        provincia: this.state.provincia,\n        tipo_proprieta: 'cv',\n        servizi: this.state.servizi,\n        ref_proprietario: this.state.ref_proprietario,\n        descrizione: this.state.descrizione\n      };\n      fetch('http://localhost:9000/insertProprieta/new', {\n        method: \"POST\",\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify(data1)\n      }).then(result => result.text()).then(result => {\n        this.setState({\n          apiResponse: JSON.parse(result)\n        });\n\n        if (this.state.apiResponse.status === 'error') {\n          this.setState({\n            error: true\n          });\n          this.setState({\n            errorMessage: this.state.apiResponse.message\n          });\n        }\n\n        const data2 = {\n          ref_proprieta_cv: this.state.apiResponse.insertId,\n          posti_letto: this.state.posti_letto,\n          tariffa_casa: this.state.tariffa_casa\n        };\n        this.setState({\n          fileName1: data2.ref_proprieta_cv + \"_1.jpg\",\n          fileName2: data2.ref_proprieta_cv + \"_2.jpg\",\n          fileName3: data2.ref_proprieta_cv + \"_3.jpg\",\n          fileName4: data2.ref_proprieta_cv + \"_4.jpg\"\n        });\n        fetch('http://localhost:9000/insertCasa/new', {\n          method: \"POST\",\n          headers: {\n            'Content-type': 'application/json'\n          },\n          body: JSON.stringify(data2)\n        }).then(result => result.text()).then(result => {\n          this.setState({\n            apiResponse: result\n          });\n\n          if (this.state.apiResponse.status === 'error') {\n            this.setState({\n              error: true\n            });\n            this.setState({\n              errorMessage: this.state.apiResponse.message\n            });\n          } else {\n            var form = new FormData();\n            form.append(\"foto1\", this.state.foto1, this.state.fileName1);\n            form.append(\"foto2\", this.state.foto2, this.state.fileName2);\n            form.append(\"foto3\", this.state.foto3, this.state.fileName3);\n            form.append(\"foto4\", this.state.foto4, this.state.fileName4);\n            fetch('http://localhost:9000/uploadFotoCV/upload', {\n              method: \"POST\",\n              body: form\n            }).then(result => result.text()).then(result => {\n              this.setState({\n                apiResponse: result\n              });\n\n              if (this.state.apiResponse.status === 'error') {\n                this.setState({\n                  error: true\n                });\n                this.setState({\n                  errorMessage: this.state.apiResponse.message\n                });\n              } else {\n                this.setState({\n                  success: true\n                });\n              }\n            });\n          }\n        });\n      });\n    };\n\n    this.state = {\n      ref_proprietario: localStorage.getItem('email'),\n      tipologia: 1,\n      tariffa_stanza: '',\n      foto1SRC: '',\n      foto1: null,\n      fileName1: '',\n      foto2SRC: '',\n      foto2: null,\n      fileName2: '',\n      foto3SRC: '',\n      foto3: null,\n      fileName3: '',\n      foto4SRC: '',\n      foto4: null,\n      fileName4: '',\n      apiResponse: [],\n      error: false,\n      errorMessage: '',\n      success: false\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"background\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"containerNew\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contentNew\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmitInsert,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }, \"Compila questo form per inserire le stanze del tuo B&B!\"), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"bb\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, \"Struttura B&B selezionata\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"i\",\n      value: \"Nome del bb\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"tipologia\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, \"Tipologia di camera\"), /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      className: \"i\",\n      required: true,\n      onChange: this.onChange,\n      id: \"tipologia\",\n      name: \"tipologia\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 21\n      }\n    }, \"Singola\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }\n    }, \"Doppia\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 21\n      }\n    }, \"Tripla\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }\n    }, \"Quadrupla\")), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"tariffa_stanza\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }, \"Tariffa stanza B&B\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      pattern: \"^\\\\d+(.\\\\d{1,2})?$\",\n      title: \"Inserire un valore numerico usando un punto per i valori decimali\",\n      id: \"tariffa_stanza\",\n      name: \"tariffa_stanza\",\n      placeholder: \"Tariffa stanza B&B\",\n      onChange: this.onChange,\n      className: \"i\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 25\n      }\n    }, \"Inserisci delle foto della tua camera\"), /*#__PURE__*/React.createElement(Form.Row, {\n      className: \"justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      id: \"foto1\",\n      name: \"foto1SRC\",\n      onChange: this.onChangeFoto,\n      className: \"inputImg\",\n      accept: \"image/*\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.foto1SRC,\n      alt: \"Foto 1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      id: \"foto2\",\n      name: \"foto2SRC\",\n      onChange: this.onChangeFoto,\n      className: \"inputImg\",\n      accept: \"image/*\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.foto2SRC,\n      alt: \"Foto 2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      id: \"foto3\",\n      name: \"foto3SRC\",\n      onChange: this.onChangeFoto,\n      className: \"inputImg\",\n      accept: \"image/*\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.foto3SRC,\n      alt: \"Foto 3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      id: \"foto4\",\n      name: \"foto4SRC\",\n      onChange: this.onChangeFoto,\n      className: \"inputImg\",\n      accept: \"image/*\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.foto4SRC,\n      alt: \"Foto 4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(Link, {\n      to: \"/InserimentoPropriet\\xE0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 13\n      }\n    }, \"Torna indietro\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 13\n      }\n    }, \"Carica\")))));\n  }\n\n}\n\nexport default InserimentoStanzaBnB;","map":{"version":3,"sources":["C:/Users/alexd/Documents/Progetto-Unipa/Frontend/src/GestioneProprietario/InserisciProp/InserimentoStanzaBnB.js"],"names":["React","Button","Form","Link","Redirect","InserimentoStanzaBnB","Component","constructor","props","onChange","e","setState","target","name","value","onChangeFoto","URL","createObjectURL","files","id","onSubmitInsert","preventDefault","data1","nome_proprieta","state","indirizzo","localita","provincia","tipo_proprieta","servizi","ref_proprietario","descrizione","fetch","method","headers","body","JSON","stringify","then","result","text","apiResponse","parse","status","error","errorMessage","message","data2","ref_proprieta_cv","insertId","posti_letto","tariffa_casa","fileName1","fileName2","fileName3","fileName4","form","FormData","append","foto1","foto2","foto3","foto4","success","localStorage","getItem","tipologia","tariffa_stanza","foto1SRC","foto2SRC","foto3SRC","foto4SRC","render"],"mappings":"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","sourcesContent":["/*CSS FATTO*/ \r\n\r\nimport React from \"react\";\r\nimport {Button, Form} from \"react-bootstrap\"\r\nimport {Link} from \"react-router-dom\"\r\n\r\nimport \"./InserimentoProprietà.css\";\r\n\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nclass InserimentoStanzaBnB extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      ref_proprietario: localStorage.getItem('email'),\r\n      tipologia: 1,\r\n      tariffa_stanza: '',\r\n      foto1SRC: '',\r\n      foto1: null,\r\n      fileName1: '',\r\n      foto2SRC: '',\r\n      foto2: null,\r\n      fileName2: '',\r\n      foto3SRC: '',\r\n      foto3: null,\r\n      fileName3: '',\r\n      foto4SRC: '',\r\n      foto4: null,\r\n      fileName4: '',\r\n      apiResponse: [],\r\n      error: false,\r\n      errorMessage: '',\r\n      success: false\r\n    };\r\n  }\r\n\r\n  onChange = (e) => {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  }\r\n\r\n  onChangeFoto = (e) => {\r\n    this.setState({ [e.target.name]: URL.createObjectURL(e.target.files[0]) })\r\n    this.setState({ [e.target.id]: e.target.files[0] });\r\n  }\r\n\r\n  onSubmitInsert = (e) => {\r\n    e.preventDefault();\r\n\r\n    const data1 = {\r\n      nome_proprieta: this.state.nome_proprieta,\r\n      indirizzo: this.state.indirizzo,\r\n      localita: this.state.localita,\r\n      provincia: this.state.provincia,\r\n      tipo_proprieta: 'cv',\r\n      servizi: this.state.servizi,\r\n      ref_proprietario: this.state.ref_proprietario,\r\n      descrizione: this.state.descrizione\r\n    }\r\n\r\n    fetch('http://localhost:9000/insertProprieta/new', {\r\n      method: \"POST\",\r\n      headers:{\r\n        'Content-type': 'application/json'\r\n      },\r\n      body: JSON.stringify(data1)\r\n    })\r\n    .then((result) => result.text())\r\n    .then((result) => {\r\n      this.setState({ apiResponse: JSON.parse(result) });\r\n\r\n      if(this.state.apiResponse.status === 'error') {\r\n        this.setState({ error: true });\r\n        this.setState({ errorMessage: this.state.apiResponse.message });\r\n      }\r\n\r\n      const data2 = {\r\n        ref_proprieta_cv: this.state.apiResponse.insertId,\r\n        posti_letto: this.state.posti_letto,\r\n        tariffa_casa : this.state.tariffa_casa\r\n      };\r\n\r\n      this.setState({\r\n        fileName1: data2.ref_proprieta_cv + \"_1.jpg\",\r\n        fileName2: data2.ref_proprieta_cv + \"_2.jpg\",\r\n        fileName3: data2.ref_proprieta_cv + \"_3.jpg\",\r\n        fileName4: data2.ref_proprieta_cv + \"_4.jpg\",\r\n      });\r\n\r\n      fetch('http://localhost:9000/insertCasa/new',{\r\n        method: \"POST\",\r\n        headers: {\r\n          'Content-type': 'application/json'\r\n        },\r\n        body: JSON.stringify(data2)\r\n      })\r\n      .then((result) => result.text())\r\n      .then((result) => {\r\n        this.setState({ apiResponse: result });\r\n\r\n        if(this.state.apiResponse.status === 'error') {\r\n          this.setState({ error: true });\r\n          this.setState({ errorMessage: this.state.apiResponse.message });\r\n        }\r\n        else { \r\n          var form = new FormData();\r\n          form.append(\"foto1\", this.state.foto1, this.state.fileName1);\r\n          form.append(\"foto2\", this.state.foto2, this.state.fileName2);\r\n          form.append(\"foto3\", this.state.foto3, this.state.fileName3);\r\n          form.append(\"foto4\", this.state.foto4, this.state.fileName4);\r\n      \r\n          fetch('http://localhost:9000/uploadFotoCV/upload', {\r\n              method: \"POST\",\r\n              body: form\r\n          })\r\n          .then((result) => result.text())\r\n          .then((result) => {\r\n            this.setState({ apiResponse: result });\r\n\r\n          if(this.state.apiResponse.status === 'error') {\r\n            this.setState({ error: true });\r\n            this.setState({ errorMessage: this.state.apiResponse.message });\r\n          }\r\n          else {\r\n            this.setState({ success: true });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  });\r\n  }\r\n\r\n  render() {\r\n    return(\r\n        <div className = \"background\">\r\n        <div className = \"containerNew\">  \r\n            <div className = \"contentNew\">\r\n                <form onSubmit = {this.onSubmitInsert}>\r\n                <h2>Compila questo form per inserire le stanze del tuo B&B!</h2>\r\n            \r\n                <label htmlFor = \"bb\">Struttura B&B selezionata</label>\r\n                  <input\r\n                  type = \"text\"\r\n                  className = \"i\"\r\n                  value = \"Nome del bb\"\r\n                />\r\n\r\n                <label htmlFor = \"tipologia\">Tipologia di camera</label>\r\n                <Form.Control as=\"select\" className=\"i\" required onChange = {this.onChange} id = \"tipologia\" name = \"tipologia\">\r\n                    <option value=\"1\">Singola</option>\r\n                    <option value=\"2\">Doppia</option>\r\n                    <option value=\"3\">Tripla</option>\r\n                    <option value=\"4\">Quadrupla</option>\r\n                  </Form.Control >\r\n \r\n                <label htmlFor = \"tariffa_stanza\">Tariffa stanza B&B</label>\r\n                <input\r\n                  type = \"text\"\r\n                  pattern = \"^\\d+(.\\d{1,2})?$\"\r\n                  title = \"Inserire un valore numerico usando un punto per i valori decimali\"\r\n                  id = \"tariffa_stanza\"\r\n                  name = \"tariffa_stanza\"\r\n                  placeholder= \"Tariffa stanza B&B\"\r\n                  onChange = {this.onChange}\r\n                  className = \"i\"\r\n                  required\r\n                />\r\n             \r\n                <Form.Group>\r\n                        <label>Inserisci delle foto della tua camera</label>\r\n                        <Form.Row className = \"justify-content-center\">\r\n                        <input\r\n                        type = \"file\"\r\n                        id = \"foto1\"\r\n                        name = \"foto1SRC\"\r\n                        onChange = {this.onChangeFoto}\r\n                        className = \"inputImg\"\r\n                        accept = \"image/*\"\r\n                        required\r\n                        />\r\n                        <img src = {this.state.foto1SRC} alt = \"Foto 1\" ></img>\r\n                        <input\r\n                        type = \"file\"\r\n                        id = \"foto2\"\r\n                        name = \"foto2SRC\"\r\n                        onChange = {this.onChangeFoto}\r\n                        className = \"inputImg\"\r\n                        accept = \"image/*\"\r\n                        required\r\n                        />\r\n                        <img src = {this.state.foto2SRC} alt = \"Foto 2\" ></img>\r\n                        <input\r\n                        type = \"file\"\r\n                        id = \"foto3\"\r\n                        name = \"foto3SRC\"\r\n                        onChange = {this.onChangeFoto}\r\n                        className = \"inputImg\"\r\n                        accept = \"image/*\"\r\n                        required\r\n                        />\r\n                        <img src = {this.state.foto3SRC} alt = \"Foto 3\" ></img>\r\n                        <input\r\n                        type = \"file\"\r\n                        id = \"foto4\"\r\n                        name = \"foto4SRC\"\r\n                        onChange = {this.onChangeFoto}\r\n                        className = \"inputImg\"\r\n                        accept = \"image/*\"\r\n                        required\r\n                        />\r\n                        <img src = {this.state.foto4SRC} alt = \"Foto 4\" ></img>\r\n                    </Form.Row>\r\n                    </Form.Group>\r\n            <Link to=\"/InserimentoProprietà\">Torna indietro</Link>\r\n            <Button variant=\"primary\" type=\"submit\">\r\n              Carica\r\n            </Button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      </div>\r\n       ); }\r\n    }\r\n\r\n\r\nexport default InserimentoStanzaBnB;"]},"metadata":{},"sourceType":"module"}