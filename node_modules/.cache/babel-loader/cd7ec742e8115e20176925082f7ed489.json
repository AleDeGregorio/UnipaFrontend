{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexd\\\\Documents\\\\Progetto-Unipa\\\\Frontend\\\\src\\\\components\\\\CaseVacanzaContainer.js\";\nimport React from \"react\"; //import { withCasaVacanzaConsumer } from \"../CasaVacanza/context\"\n\nimport Loading from \"./Loading\";\nimport CaseVacanzaFilter from './CaseVacanzaFiltro';\nimport CaseVacanzaList from \"./CaseVacanzaLista\";\nimport './CaseVacanzaLista.css';\nimport { Redirect } from \"react-router-dom\";\n\nclass CasaVacanzaContainer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      this.setState({\n        datiRicerca: e,\n        loading: true\n      });\n    };\n\n    this.state = {\n      case: this.props.case ? this.props.case : [],\n      posti: this.props.posti ? this.props.posti : 1,\n      datiRicerca: '',\n      apiResponse: [],\n      error: false,\n      errorMessage: '',\n      loading: false\n    };\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:9000/servizi/all', {\n      method: \"GET\",\n      headers: {\n        'Content-type': 'application/json'\n      }\n    }).then(result => result.text()).then(result => {\n      this.setState({\n        apiResponse: JSON.parse(result)\n      });\n\n      if (this.state.apiResponse.status === 'error') {\n        this.setState({\n          error: true\n        });\n        this.setState({\n          errorMessage: this.state.apiResponse_strutture.message\n        });\n      }\n    });\n  }\n\n  search() {\n    const data = {\n      tipo: 'cv',\n      localita: datiRicerca.localita ? datiRicerca.localita : '',\n      provincia: '',\n      servizi: '',\n      posti: datiRicerca.posti ? datiRicerca.posti : 1,\n      tariffa: datiRicerca.tariffa ? datiRicerca.tariffa : '',\n      checkIn: '',\n      checkOut: ''\n    };\n    fetch('http://localhost:9000/ricercaAlloggio/risultati', {\n      method: \"POST\",\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(result => result.text()).then(result => {\n      console.log(JSON.parse(result));\n      this.setState({\n        case: JSON.parse(result)\n      });\n\n      if (this.state.case.status === 'error') {\n        this.setState({\n          error: true\n        });\n        this.setState({\n          errorMessage: this.state.case.message\n        });\n      } else {\n        this.setState({\n          loading: false\n        });\n      }\n    });\n  }\n\n  render() {\n    if (this.state.error) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/ErrorPage\",\n          state: {\n            error: true,\n            errorMessage: this.state.errorMessage\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 14\n        }\n      });\n    } else if (this.state.loading) {\n      this.search();\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CaseVacanzaFilter, {\n        servizi: this.state.apiResponse,\n        posti: this.props.posti,\n        onChange: this.onChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ListaProp\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Loading, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }\n      })));\n    } else {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CaseVacanzaFilter, {\n        servizi: this.state.apiResponse,\n        posti: this.props.posti,\n        onChange: this.onChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ListaProp\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(CaseVacanzaList, {\n        case: this.state.case,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }\n      })));\n    }\n  }\n\n}\n/*function CasaVacanzaContainer({ context }) {\r\n  const { loading, sortedCaseVacanza, caseVacanza } = context;\r\n  if (loading) {\r\n    return <Loading />;\r\n  }\r\n  return (\r\n    <>\r\n      <CaseVacanzaFilter casaVacanza={caseVacanza} />\r\n      <div className=\"ListaProp\">\r\n      <CaseVacanzaList caseVacanza={sortedCaseVacanza} />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withCasaVacanzaConsumer(CasaVacanzaContainer);*/\n\n\nexport default CasaVacanzaContainer;","map":{"version":3,"sources":["C:/Users/alexd/Documents/Progetto-Unipa/Frontend/src/components/CaseVacanzaContainer.js"],"names":["React","Loading","CaseVacanzaFilter","CaseVacanzaList","Redirect","CasaVacanzaContainer","Component","constructor","props","onChange","e","setState","datiRicerca","loading","state","case","posti","apiResponse","error","errorMessage","componentDidMount","fetch","method","headers","then","result","text","JSON","parse","status","apiResponse_strutture","message","search","data","tipo","localita","provincia","servizi","tariffa","checkIn","checkOut","body","stringify","console","log","render","pathname"],"mappings":"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","sourcesContent":["import React from \"react\";\r\n//import { withCasaVacanzaConsumer } from \"../CasaVacanza/context\"\r\nimport Loading from \"./Loading\";\r\nimport CaseVacanzaFilter from './CaseVacanzaFiltro';\r\nimport CaseVacanzaList from \"./CaseVacanzaLista\";\r\n\r\nimport './CaseVacanzaLista.css'\r\n\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nclass CasaVacanzaContainer extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      case: this.props.case ? this.props.case : [],\r\n      posti: this.props.posti ? this.props.posti : 1,\r\n      datiRicerca: '',\r\n      apiResponse: [],\r\n      error: false,\r\n      errorMessage: '',\r\n      loading: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    fetch('http://localhost:9000/servizi/all', {\r\n      method: \"GET\",\r\n      headers: {\r\n        'Content-type': 'application/json'\r\n      }\r\n    })\r\n    .then((result) => result.text())\r\n    .then((result) => {\r\n        this.setState({ apiResponse: JSON.parse(result) });\r\n    \r\n        if(this.state.apiResponse.status === 'error') {\r\n            this.setState({ error: true });\r\n            this.setState({ errorMessage: this.state.apiResponse_strutture.message });\r\n        }\r\n    });\r\n  }\r\n\r\n  onChange = (e) => {\r\n    this.setState({ datiRicerca: e, loading: true });\r\n  }\r\n\r\n  search() {\r\n    const data = {\r\n      tipo: 'cv',\r\n      localita: datiRicerca.localita ? datiRicerca.localita : '',\r\n      provincia: '',\r\n      servizi: '',\r\n      posti: datiRicerca.posti ? datiRicerca.posti : 1,\r\n      tariffa: datiRicerca.tariffa ? datiRicerca.tariffa : '',\r\n      checkIn: '',\r\n      checkOut: ''\r\n    };\r\n\r\n    fetch('http://localhost:9000/ricercaAlloggio/risultati', {\r\n        method: \"POST\",\r\n        headers: {\r\n            'Content-type': 'application/json'\r\n        },\r\n        body: JSON.stringify(data)\r\n    })\r\n    .then((result) => result.text())\r\n    .then((result) => {\r\n        console.log(JSON.parse(result));\r\n        this.setState({ case: JSON.parse(result) });\r\n\r\n        if(this.state.case.status === 'error') {\r\n          this.setState({ error: true });\r\n          this.setState({ errorMessage: this.state.case.message });\r\n        }\r\n        else {\r\n          this.setState({ loading: false });\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  render() {\r\n    if (this.state.error) {\r\n      return <Redirect \r\n        to = {{\r\n          pathname: \"/ErrorPage\",\r\n          state: {\r\n            error: true,\r\n            errorMessage: this.state.errorMessage\r\n          }\r\n        }}\r\n      />\r\n    }\r\n    else if(this.state.loading) {\r\n      this.search();\r\n      return (\r\n        <>\r\n          <CaseVacanzaFilter servizi={this.state.apiResponse} posti = {this.props.posti} onChange = {this.onChange} />\r\n          <div className=\"ListaProp\">\r\n            <Loading />\r\n          </div>\r\n        </>\r\n      );\r\n    }\r\n    else {\r\n      return (\r\n        <>\r\n          <CaseVacanzaFilter servizi={this.state.apiResponse} posti = {this.props.posti} onChange = {this.onChange} />\r\n          <div className=\"ListaProp\">\r\n            <CaseVacanzaList case={this.state.case}/>\r\n          </div>\r\n        </>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n/*function CasaVacanzaContainer({ context }) {\r\n  const { loading, sortedCaseVacanza, caseVacanza } = context;\r\n  if (loading) {\r\n    return <Loading />;\r\n  }\r\n  return (\r\n    <>\r\n      <CaseVacanzaFilter casaVacanza={caseVacanza} />\r\n      <div className=\"ListaProp\">\r\n      <CaseVacanzaList caseVacanza={sortedCaseVacanza} />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withCasaVacanzaConsumer(CasaVacanzaContainer);*/\r\n\r\nexport default CasaVacanzaContainer;"]},"metadata":{},"sourceType":"module"}