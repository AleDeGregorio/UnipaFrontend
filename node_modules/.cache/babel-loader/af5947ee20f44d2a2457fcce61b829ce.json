{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexd\\\\Documents\\\\Progetto-Unipa\\\\Frontend\\\\src\\\\GestioneProprietario\\\\InserisciProp\\\\InserimentoStanzaBnB.js\";\n\n/*CSS FATTO*/\nimport React from \"react\";\nimport { Button, Form, Alert } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport \"./InserimentoProprietà.css\";\nimport { Redirect } from 'react-router-dom';\n\nclass InserimentoStanzaBnB extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.setShowSucc = e => {\n      this.setState({\n        success: e\n      });\n    };\n\n    this.setShowErr = e => {\n      this.setState({\n        error: e\n      });\n    };\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.onChangeFoto = e => {\n      this.setState({\n        [e.target.name]: URL.createObjectURL(e.target.files[0])\n      });\n      this.setState({\n        [e.target.id]: e.target.files[0]\n      });\n    };\n\n    this.onSubmitInsert = e => {\n      e.preventDefault();\n      const data1 = {\n        ref_bb: this.state.dati_bb.ref_proprieta_bb,\n        tipologia: this.state.tipologia,\n        tariffa_stanza: this.state.tariffa_stanza\n      };\n      fetch('http://192.168.1.106:9000/insertStanza/new', {\n        method: \"POST\",\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify(data1)\n      }).then(result => result.text()).then(result => {\n        var res;\n\n        try {\n          this.setState({\n            apiResponse: JSON.parse(result)\n          });\n          res = JSON.parse(result);\n        } catch (error) {\n          this.setState({\n            apiResponse: result\n          });\n          res = result;\n          this.setState({\n            empty: true\n          });\n        }\n\n        if (res.length < 1 || res.code && res.code === 404) {\n          this.setState({\n            empty: true,\n            errorMessage: res.message\n          });\n        } else if (this.state.apiResponse.status && this.state.apiResponse.status === 'error') {\n          window.scrollTo(0, 0);\n          this.setState({\n            error: true\n          });\n          this.setState({\n            errorMessage: this.state.apiResponse.message\n          });\n        }\n\n        var id_stanza = this.state.apiResponse.id_stanza;\n        var ref_bb = this.state.dati_bb.ref_bb;\n        this.setState({\n          fileName1: id_stanza + \"_\" + ref_bb + \"_1.jpg\",\n          fileName2: id_stanza + \"_\" + ref_bb + \"_2.jpg\",\n          fileName3: id_stanza + \"_\" + ref_bb + \"_3.jpg\",\n          fileName4: id_stanza + \"_\" + ref_bb + \"_4.jpg\"\n        });\n        var form = new FormData();\n        form.append(\"foto1\", this.state.foto1, this.state.fileName1);\n        form.append(\"foto2\", this.state.foto2, this.state.fileName2);\n        form.append(\"foto3\", this.state.foto3, this.state.fileName3);\n        form.append(\"foto4\", this.state.foto4, this.state.fileName4);\n        fetch('http://192.168.1.106:9000/uploadFotoST/upload', {\n          method: \"POST\",\n          body: form\n        }).then(result => result.text()).then(result => {\n          var res = result;\n\n          if (res.length < 1 || res.code && res.code === 404) {\n            this.setState({\n              empty: true,\n              errorMessage: res.message\n            });\n          } else if (this.state.apiResponse.status && this.state.apiResponse.status === 'error') {\n            window.scrollTo(0, 0);\n            this.setState({\n              error: true\n            });\n            this.setState({\n              errorMessage: this.state.apiResponse.message\n            });\n          } else {\n            localStorage.setObj('user_data', this.state.apiResponse);\n            window.scrollTo(0, 0);\n            this.setState({\n              success: true,\n              error: false\n            }, () => {\n              window.setTimeout(() => {\n                this.setState({\n                  success: false\n                });\n              }, 3000);\n            });\n          }\n        });\n      });\n    };\n\n    this.state = {\n      dati_bb: this.props.history.location.state ? this.props.history.location.state.dati_bb : '',\n      ref_proprietario: localStorage.getItem('email'),\n      tipologia: 1,\n      tariffa_stanza: '',\n      foto1SRC: '',\n      foto1: null,\n      fileName1: '',\n      foto2SRC: '',\n      foto2: null,\n      fileName2: '',\n      foto3SRC: '',\n      foto3: null,\n      fileName3: '',\n      foto4SRC: '',\n      foto4: null,\n      fileName4: '',\n      apiResponse: [],\n      error: false,\n      errorMessage: '',\n      success: false,\n      empty: false\n    };\n  }\n\n  render() {\n    if (!localStorage.getItem('logged') || !localStorage.getItem('proprietario')) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/ErrorPage\",\n          state: {\n            error: true,\n            errorMessage: \"Utente non autorizzato\"\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 14\n        }\n      });\n    } else if (this.state.empty) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"background\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"containerNew\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"contentNew\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 17\n        }\n      }, \"Si \\xE8 verificato un errore: \", this.state.errorMessage), /*#__PURE__*/React.createElement(Link, {\n        to: \"/InserimentoPropriet\\xE0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }\n      }, \"Torna indietro\"))));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"background\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n        show: this.state.success,\n        variant: \"success\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Alert.Heading, {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }\n      }, \"Inserimento avvenuto con successo!\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }\n      }, \"Le informazioni della tua nuova stanza sono state correttamente caricate e memorizzate all'interno del sistema.\"), /*#__PURE__*/React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-end\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: () => this.setShowSucc(false),\n        variant: \"outline-success\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 17\n        }\n      }, \"Ok\"))))), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n        show: this.state.error,\n        variant: \"danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Alert.Heading, {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 17\n        }\n      }, \"Inserimento non avvenuto!\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 17\n        }\n      }, \"Si \\xE8 verificato un errore nell'inserimento dei dati, riprovare.\"), /*#__PURE__*/React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-end\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: () => this.setShowErr(false),\n        variant: \"outline-success\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }\n      }, \"Ok\"))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"containerNew\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"contentNew\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.onSubmitInsert,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 17\n        }\n      }, \"Compila questo form per inserire le stanze del tuo B&B!\"), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"bb\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 17\n        }\n      }, \"Struttura B&B selezionata\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"i\",\n        value: this.state.dati_bb.nome_proprieta,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"tipologia\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 17\n        }\n      }, \"Tipologia di stanza\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"i\",\n        required: true,\n        onChange: this.onChange,\n        id: \"tipologia\",\n        name: \"tipologia\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 21\n        }\n      }, \"Singola\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 21\n        }\n      }, \"Doppia\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 21\n        }\n      }, \"Tripla\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 21\n        }\n      }, \"Quadrupla\")), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"tariffa_stanza\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 17\n        }\n      }, \"Tariffa stanza B&B\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        pattern: \"^\\\\d+(.\\\\d{1,2})?$\",\n        title: \"Inserire un valore numerico usando un punto per i valori decimali\",\n        id: \"tariffa_stanza\",\n        name: \"tariffa_stanza\",\n        placeholder: \"Tariffa stanza B&B\",\n        onChange: this.onChange,\n        className: \"i\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(Form.Group, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 25\n        }\n      }, \"Inserisci delle foto della tua stanza\"), /*#__PURE__*/React.createElement(Form.Row, {\n        className: \"justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        id: \"foto1\",\n        name: \"foto1SRC\",\n        onChange: this.onChangeFoto,\n        className: \"inputImg\",\n        accept: \"image/*\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"img\", {\n        src: this.state.foto1SRC,\n        alt: \"Foto 1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        id: \"foto2\",\n        name: \"foto2SRC\",\n        onChange: this.onChangeFoto,\n        className: \"inputImg\",\n        accept: \"image/*\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"img\", {\n        src: this.state.foto2SRC,\n        alt: \"Foto 2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        id: \"foto3\",\n        name: \"foto3SRC\",\n        onChange: this.onChangeFoto,\n        className: \"inputImg\",\n        accept: \"image/*\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"img\", {\n        src: this.state.foto3SRC,\n        alt: \"Foto 3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        id: \"foto4\",\n        name: \"foto4SRC\",\n        onChange: this.onChangeFoto,\n        className: \"inputImg\",\n        accept: \"image/*\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"img\", {\n        src: this.state.foto4SRC,\n        alt: \"Foto 4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"bottoniScelta2\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 21\n        }\n      }, \"Carica\")), /*#__PURE__*/React.createElement(Link, {\n        to: \"/InserimentoPropriet\\xE0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 13\n        }\n      }, \"Torna indietro\")))));\n    }\n  }\n\n}\n\nexport default InserimentoStanzaBnB;","map":{"version":3,"sources":["C:/Users/alexd/Documents/Progetto-Unipa/Frontend/src/GestioneProprietario/InserisciProp/InserimentoStanzaBnB.js"],"names":["React","Button","Form","Alert","Link","Redirect","InserimentoStanzaBnB","Component","constructor","props","setShowSucc","e","setState","success","setShowErr","error","onChange","target","name","value","onChangeFoto","URL","createObjectURL","files","id","onSubmitInsert","preventDefault","data1","ref_bb","state","dati_bb","ref_proprieta_bb","tipologia","tariffa_stanza","fetch","method","headers","body","JSON","stringify","then","result","text","res","apiResponse","parse","empty","length","code","errorMessage","message","status","window","scrollTo","id_stanza","fileName1","fileName2","fileName3","fileName4","form","FormData","append","foto1","foto2","foto3","foto4","localStorage","setObj","setTimeout","history","location","ref_proprietario","getItem","foto1SRC","foto2SRC","foto3SRC","foto4SRC","render","pathname","fontWeight","nome_proprieta"],"mappings":"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","sourcesContent":["/*CSS FATTO*/ \r\n\r\nimport React from \"react\";\r\nimport {Button, Form, Alert} from \"react-bootstrap\"\r\nimport {Link} from \"react-router-dom\"\r\n\r\nimport \"./InserimentoProprietà.css\";\r\n\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nclass InserimentoStanzaBnB extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      dati_bb: this.props.history.location.state ? this.props.history.location.state.dati_bb : '',\r\n      ref_proprietario: localStorage.getItem('email'),\r\n      tipologia: 1,\r\n      tariffa_stanza: '',\r\n      foto1SRC: '',\r\n      foto1: null,\r\n      fileName1: '',\r\n      foto2SRC: '',\r\n      foto2: null,\r\n      fileName2: '',\r\n      foto3SRC: '',\r\n      foto3: null,\r\n      fileName3: '',\r\n      foto4SRC: '',\r\n      foto4: null,\r\n      fileName4: '',\r\n      apiResponse: [],\r\n      error: false,\r\n      errorMessage: '',\r\n      success: false,\r\n      empty: false\r\n    };\r\n  }\r\n\r\n  setShowSucc = (e) => {\r\n    this.setState({ success: e })\r\n  }\r\n\r\n  setShowErr = (e) => {\r\n    this.setState({ error: e })\r\n  }\r\n\r\n  onChange = (e) => {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  }\r\n\r\n  onChangeFoto = (e) => {\r\n    this.setState({ [e.target.name]: URL.createObjectURL(e.target.files[0]) })\r\n    this.setState({ [e.target.id]: e.target.files[0] });\r\n  }\r\n\r\n  onSubmitInsert = (e) => {\r\n    e.preventDefault();\r\n\r\n    const data1 = {\r\n      ref_bb: this.state.dati_bb.ref_proprieta_bb,\r\n      tipologia: this.state.tipologia,\r\n      tariffa_stanza: this.state.tariffa_stanza\r\n    }\r\n\r\n    fetch('http://192.168.1.106:9000/insertStanza/new', {\r\n      method: \"POST\",\r\n      headers:{\r\n        'Content-type': 'application/json'\r\n      },\r\n      body: JSON.stringify(data1)\r\n    })\r\n    .then((result) => result.text())\r\n    .then((result) => {\r\n\r\n      var res;\r\n\r\n      try {\r\n        this.setState({ apiResponse: JSON.parse(result) });\r\n        \r\n        res = JSON.parse(result);\r\n      } catch (error) {\r\n        this.setState({ apiResponse: result });\r\n        \r\n        res = result;\r\n\r\n        this.setState({ empty: true });\r\n      }\r\n\r\n\r\n      if(res.length < 1 || (res.code && res.code === 404)) {\r\n        this.setState({ empty: true, errorMessage: res.message });\r\n      }\r\n\r\n      else if(this.state.apiResponse.status && this.state.apiResponse.status === 'error') {\r\n        window.scrollTo(0, 0);\r\n        this.setState({ error: true });\r\n        this.setState({ errorMessage: this.state.apiResponse.message });\r\n      }\r\n\r\n      var id_stanza = this.state.apiResponse.id_stanza;\r\n      var ref_bb = this.state.dati_bb.ref_bb;\r\n\r\n      this.setState({\r\n        fileName1: id_stanza + \"_\" + ref_bb + \"_1.jpg\",\r\n        fileName2: id_stanza + \"_\" + ref_bb + \"_2.jpg\",\r\n        fileName3: id_stanza + \"_\" + ref_bb + \"_3.jpg\",\r\n        fileName4: id_stanza + \"_\" + ref_bb + \"_4.jpg\",\r\n      });\r\n\r\n      var form = new FormData();\r\n      form.append(\"foto1\", this.state.foto1, this.state.fileName1);\r\n      form.append(\"foto2\", this.state.foto2, this.state.fileName2);\r\n      form.append(\"foto3\", this.state.foto3, this.state.fileName3);\r\n      form.append(\"foto4\", this.state.foto4, this.state.fileName4);\r\n  \r\n      fetch('http://192.168.1.106:9000/uploadFotoST/upload', {\r\n          method: \"POST\",\r\n          body: form\r\n      })\r\n      .then((result) => result.text())\r\n      .then((result) => {\r\n        var res = result;\r\n\r\n        if(res.length < 1 || (res.code && res.code === 404)) {\r\n          this.setState({ empty: true, errorMessage: res.message });\r\n        }\r\n  \r\n        else if(this.state.apiResponse.status && this.state.apiResponse.status === 'error') {\r\n          window.scrollTo(0, 0);\r\n          this.setState({ error: true });\r\n          this.setState({ errorMessage: this.state.apiResponse.message });\r\n        }\r\n        else {\r\n          localStorage.setObj('user_data', this.state.apiResponse);\r\n          window.scrollTo(0, 0);\r\n          this.setState({ success: true, error: false },()=>{\r\n              window.setTimeout(()=>{\r\n                this.setState({success:false})\r\n              }, 3000)\r\n          })\r\n        }\r\n    });\r\n  });\r\n  }\r\n\r\n  render() {\r\n    if(!localStorage.getItem('logged') || !localStorage.getItem('proprietario')) {\r\n      return <Redirect\r\n          to={{\r\n              pathname: \"/ErrorPage\",\r\n              state: { \r\n                error: true,\r\n                errorMessage: \"Utente non autorizzato\" \r\n              }\r\n          }}\r\n      />\r\n    }\r\n    else if(this.state.empty) {\r\n      return(\r\n        <div className = \"background\">\r\n        <div className = \"containerNew\">  \r\n            <div className = \"contentNew\">\r\n                <p>Si è verificato un errore: {this.state.errorMessage}</p>\r\n            <Link to=\"/InserimentoProprietà\">Torna indietro</Link>\r\n        </div>\r\n      </div>\r\n      </div>\r\n      );\r\n    }\r\n    else {\r\n      return(\r\n        <div className = \"background\">\r\n          <>\r\n            <Alert show={this.state.success} variant=\"success\">\r\n            <Alert.Heading style = {{fontWeight: 'bold'}}>Inserimento avvenuto con successo!</Alert.Heading>\r\n            <p>\r\n              Le informazioni della tua nuova stanza sono state correttamente caricate e memorizzate all'interno del sistema.\r\n            </p>\r\n            <hr />\r\n            <div className=\"d-flex justify-content-end\">\r\n                <Button onClick={() => this.setShowSucc(false)} variant=\"outline-success\">\r\n                <span style = {{fontWeight: 'bold'}}>Ok</span>\r\n                </Button>\r\n            </div>\r\n            </Alert>\r\n          </>\r\n            <>\r\n                <Alert show={this.state.error} variant=\"danger\">\r\n                <Alert.Heading style = {{fontWeight: 'bold'}}>Inserimento non avvenuto!</Alert.Heading>\r\n                <p>\r\n                  Si è verificato un errore nell'inserimento dei dati, riprovare.\r\n                </p>\r\n                <hr />\r\n                <div className=\"d-flex justify-content-end\">\r\n                    <Button onClick={() => this.setShowErr(false)} variant=\"outline-success\">\r\n                    <span style = {{fontWeight: 'bold'}}>Ok</span>\r\n                    </Button>\r\n                </div>\r\n                </Alert>\r\n            </>\r\n        <div className = \"containerNew\">  \r\n            <div className = \"contentNew\">\r\n                <form onSubmit = {this.onSubmitInsert}>\r\n                <h2>Compila questo form per inserire le stanze del tuo B&B!</h2>\r\n            \r\n                <label htmlFor = \"bb\">Struttura B&B selezionata</label>\r\n                  <input\r\n                  type = \"text\"\r\n                  className = \"i\"\r\n                  value = {this.state.dati_bb.nome_proprieta}\r\n                />\r\n\r\n                <label htmlFor = \"tipologia\">Tipologia di stanza</label>\r\n                <select className=\"i\" required onChange = {this.onChange} id = \"tipologia\" name = \"tipologia\">\r\n                    <option value=\"1\">Singola</option>\r\n                    <option value=\"2\">Doppia</option>\r\n                    <option value=\"3\">Tripla</option>\r\n                    <option value=\"4\">Quadrupla</option>\r\n                </select >\r\n\r\n                <label htmlFor = \"tariffa_stanza\">Tariffa stanza B&B</label>\r\n                <input\r\n                  type = \"text\"\r\n                  pattern = \"^\\d+(.\\d{1,2})?$\"\r\n                  title = \"Inserire un valore numerico usando un punto per i valori decimali\"\r\n                  id = \"tariffa_stanza\"\r\n                  name = \"tariffa_stanza\"\r\n                  placeholder= \"Tariffa stanza B&B\"\r\n                  onChange = {this.onChange}\r\n                  className = \"i\"\r\n                  required\r\n                />\r\n            \r\n                <Form.Group>\r\n                        <label>Inserisci delle foto della tua stanza</label>\r\n                        <Form.Row className = \"justify-content-center\">\r\n                        <input\r\n                        type = \"file\"\r\n                        id = \"foto1\"\r\n                        name = \"foto1SRC\"\r\n                        onChange = {this.onChangeFoto}\r\n                        className = \"inputImg\"\r\n                        accept = \"image/*\"\r\n                        required\r\n                        />\r\n                        <img src = {this.state.foto1SRC} alt = \"Foto 1\" ></img>\r\n                        <input\r\n                        type = \"file\"\r\n                        id = \"foto2\"\r\n                        name = \"foto2SRC\"\r\n                        onChange = {this.onChangeFoto}\r\n                        className = \"inputImg\"\r\n                        accept = \"image/*\"\r\n                        required\r\n                        />\r\n                        <img src = {this.state.foto2SRC} alt = \"Foto 2\" ></img>\r\n                        <input\r\n                        type = \"file\"\r\n                        id = \"foto3\"\r\n                        name = \"foto3SRC\"\r\n                        onChange = {this.onChangeFoto}\r\n                        className = \"inputImg\"\r\n                        accept = \"image/*\"\r\n                        required\r\n                        />\r\n                        <img src = {this.state.foto3SRC} alt = \"Foto 3\" ></img>\r\n                        <input\r\n                        type = \"file\"\r\n                        id = \"foto4\"\r\n                        name = \"foto4SRC\"\r\n                        onChange = {this.onChangeFoto}\r\n                        className = \"inputImg\"\r\n                        accept = \"image/*\"\r\n                        required\r\n                        />\r\n                        <img src = {this.state.foto4SRC} alt = \"Foto 4\" ></img>\r\n                    </Form.Row>\r\n                    <button className=\"bottoniScelta2\" type=\"submit\">\r\n                      Carica\r\n                    </button>\r\n                </Form.Group>\r\n            <Link to=\"/InserimentoProprietà\">Torna indietro</Link>\r\n            \r\n          </form>\r\n        </div>\r\n      </div>\r\n      </div>\r\n      ); \r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport default InserimentoStanzaBnB;"]},"metadata":{},"sourceType":"module"}