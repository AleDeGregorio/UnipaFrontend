{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexd\\\\Documents\\\\Progetto-Unipa\\\\Frontend\\\\src\\\\GestioneProprietario\\\\Accettazione\\\\Accettazione.js\";\nimport React from 'react';\nimport { Table, Button, Accordion } from 'react-bootstrap'; //import { ListGroup, ButtonGroup, Card } from 'react-bootstrap'\n\nimport './Accettazione.css';\nimport { Redirect } from 'react-router-dom';\n\nclass Accettazione extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apiResponse_accettazione: [],\n      apiResponse_accettate: [],\n      email_prop: localStorage.getItem('email'),\n      error: false,\n      errorMessage: ''\n    };\n  }\n\n  componentDidMount() {\n    const data = {\n      ref_proprietario: this.state.email_prop\n    };\n    fetch('http://localhost:9000/getPrenotazioniAccettazione/prenotazioniAccettazione', {\n      method: \"POST\",\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(result => result.text()).then(result => {\n      this.setState({\n        apiResponse_accettazione: JSON.parse(result)\n      });\n\n      if (this.state.apiResponse_accettazione.status === 'error') {\n        this.setState({\n          error: true\n        });\n        this.setState({\n          errorMessage: this.state.apiResponse_accettazione.message\n        });\n      }\n    });\n    fetch('http://localhost:9000/getPrenotazioniAccettate/prenotazioniAccettate', {\n      method: \"POST\",\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(result => result.text()).then(result => {\n      this.setState({\n        apiResponse_accettate: JSON.parse(result)\n      });\n\n      if (this.state.apiResponse_accettate.status === 'error') {\n        this.setState({\n          error: true\n        });\n        this.setState({\n          errorMessage: this.state.apiResponse_accettate.message\n        });\n      }\n    });\n  }\n\n  render() {\n    if (!localStorage.getItem('logged') || !localStorage.getItem('proprietario')) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/ErrorPage\",\n          state: {\n            error: true,\n            errorMessage: \"Utente non autorizzato\"\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 20\n        }\n      });\n    } else if (this.state.error) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/ErrorPage\",\n          state: {\n            error: true,\n            errorMessage: this.state.errorMessage\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 20\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"accettazione\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"containerAccettazione\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }\n      }, \"Ecco le prenotazioni da accettare\"), /*#__PURE__*/React.createElement(Accordion, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"testa_accordo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 33\n        }\n      }, \"ID\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 33\n        }\n      }, \"Cliente\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 33\n        }\n      }, \"Tempo rimanente\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 33\n        }\n      }, \"Struttura\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 33\n        }\n      }, \"Visualizza dettagli\")), this.state.apiResponse_accettazione.map(res => /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"testa_accordo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 45\n        }\n      }, res.id_prenotazione), \"\\xA0\", /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 45\n        }\n      }, res.ref_cliente), \"\\xA0\", /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 45\n        }\n      }, Math.ceil(Math.abs(new Date(res.data_partenza) - Date.now()) / (1000 * 60 * 60 * 24)), \" giorni\"), \"\\xA0\", /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 45\n        }\n      }, res.ref_proprieta), \"\\xA0\", /*#__PURE__*/React.createElement(Accordion.Toggle, {\n        as: Button,\n        variant: \"link\",\n        eventKey: res.id_prenotazione,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 45\n        }\n      }, \"visualizza dettagli\")), /*#__PURE__*/React.createElement(Accordion.Collapse, {\n        eventKey: res.id_prenotazione,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"corpo_accordo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 49\n        }\n      }, \"Numero soggiornanti: \", res.num_soggiornanti), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 49\n        }\n      }, \"Costo: \", res.costo), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 49\n        }\n      }, \"Caparra: \", res.caparra), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 49\n        }\n      }, \"Inizio soggiorno: \", new Date(res.data_partenza).toLocaleDateString()), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 49\n        }\n      }, \"Fine soggiorno: \", new Date(res.data_ritorno).toLocaleDateString()))))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"listaAccettazioni\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 25\n        }\n      }, \"Ecco le prenotazioni accettate\"), /*#__PURE__*/React.createElement(Table, {\n        className: \"tabella\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 37\n        }\n      }, \"ID \"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 37\n        }\n      }, \"Cliente\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 37\n        }\n      }, \"Durata soggiorno\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 37\n        }\n      }, \"Struttura\"))), this.state.apiResponse_accettate.map(res => /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 49\n        }\n      }, res.id_prenotazione), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 49\n        }\n      }, res.ref_cliente), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 49\n        }\n      }, Math.ceil(Math.abs(new Date(res.data_ritorno) - new Date(res.data_partenza)) / (1000 * 60 * 60 * 24))), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 49\n        }\n      }, res.ref_proprieta))))))));\n    }\n  }\n\n}\n\nexport default Accettazione;","map":{"version":3,"sources":["C:/Users/alexd/Documents/Progetto-Unipa/Frontend/src/GestioneProprietario/Accettazione/Accettazione.js"],"names":["React","Table","Button","Accordion","Redirect","Accettazione","Component","constructor","props","state","apiResponse_accettazione","apiResponse_accettate","email_prop","localStorage","getItem","error","errorMessage","componentDidMount","data","ref_proprietario","fetch","method","headers","body","JSON","stringify","then","result","text","setState","parse","status","message","render","pathname","map","res","id_prenotazione","ref_cliente","Math","ceil","abs","Date","data_partenza","now","ref_proprieta","num_soggiornanti","costo","caparra","toLocaleDateString","data_ritorno"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,KAAR,EAAeC,MAAf,EAAuBC,SAAvB,QAAuC,iBAAvC,C,CACA;;AACA,OAAO,oBAAP;AAEA,SAASC,QAAT,QAAyB,kBAAzB;;AAEA,MAAMC,YAAN,SAA2BL,KAAK,CAACM,SAAjC,CAA2C;AAEvCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACTC,MAAAA,wBAAwB,EAAE,EADjB;AAETC,MAAAA,qBAAqB,EAAE,EAFd;AAGTC,MAAAA,UAAU,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAHH;AAITC,MAAAA,KAAK,EAAE,KAJE;AAKTC,MAAAA,YAAY,EAAE;AALL,KAAb;AAOH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB,UAAMC,IAAI,GAAG;AACTC,MAAAA,gBAAgB,EAAE,KAAKV,KAAL,CAAWG;AADpB,KAAb;AAIAQ,IAAAA,KAAK,CAAC,4EAAD,EAA+E;AAChFC,MAAAA,MAAM,EAAE,MADwE;AAEhFC,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX,OAFuE;AAKhFC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,IAAf;AAL0E,KAA/E,CAAL,CAOCQ,IAPD,CAOOC,MAAD,IAAYA,MAAM,CAACC,IAAP,EAPlB,EAQCF,IARD,CAQOC,MAAD,IAAY;AACd,WAAKE,QAAL,CAAc;AAAEnB,QAAAA,wBAAwB,EAAEc,IAAI,CAACM,KAAL,CAAWH,MAAX;AAA5B,OAAd;;AAEA,UAAG,KAAKlB,KAAL,CAAWC,wBAAX,CAAoCqB,MAApC,KAA+C,OAAlD,EAA2D;AACvD,aAAKF,QAAL,CAAc;AAAEd,UAAAA,KAAK,EAAE;AAAT,SAAd;AACA,aAAKc,QAAL,CAAc;AAAEb,UAAAA,YAAY,EAAE,KAAKP,KAAL,CAAWC,wBAAX,CAAoCsB;AAApD,SAAd;AACH;AACJ,KAfD;AAiBAZ,IAAAA,KAAK,CAAC,sEAAD,EAAyE;AAC1EC,MAAAA,MAAM,EAAE,MADkE;AAE1EC,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX,OAFiE;AAK1EC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,IAAf;AALoE,KAAzE,CAAL,CAOCQ,IAPD,CAOOC,MAAD,IAAYA,MAAM,CAACC,IAAP,EAPlB,EAQCF,IARD,CAQOC,MAAD,IAAY;AACd,WAAKE,QAAL,CAAc;AAAElB,QAAAA,qBAAqB,EAAEa,IAAI,CAACM,KAAL,CAAWH,MAAX;AAAzB,OAAd;;AAEA,UAAG,KAAKlB,KAAL,CAAWE,qBAAX,CAAiCoB,MAAjC,KAA4C,OAA/C,EAAwD;AACpD,aAAKF,QAAL,CAAc;AAAEd,UAAAA,KAAK,EAAE;AAAT,SAAd;AACA,aAAKc,QAAL,CAAc;AAAEb,UAAAA,YAAY,EAAE,KAAKP,KAAL,CAAWE,qBAAX,CAAiCqB;AAAjD,SAAd;AACH;AACJ,KAfD;AAgBH;;AAEDC,EAAAA,MAAM,GAAG;AACL,QAAG,CAACpB,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAD,IAAmC,CAACD,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAvC,EAA6E;AACzE,0BAAO,oBAAC,QAAD;AACH,QAAA,EAAE,EAAE;AACAoB,UAAAA,QAAQ,EAAE,YADV;AAEAzB,UAAAA,KAAK,EAAE;AACHM,YAAAA,KAAK,EAAE,IADJ;AAEHC,YAAAA,YAAY,EAAE;AAFX;AAFP,SADD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AASH,KAVD,MAWK,IAAG,KAAKP,KAAL,CAAWM,KAAd,EAAqB;AACtB,0BAAO,oBAAC,QAAD;AACH,QAAA,EAAE,EAAE;AACAmB,UAAAA,QAAQ,EAAE,YADV;AAEAzB,UAAAA,KAAK,EAAE;AACHM,YAAAA,KAAK,EAAE,IADJ;AAEHC,YAAAA,YAAY,EAAE,KAAKP,KAAL,CAAWO;AAFtB;AAFP,SADD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AASH,KAVI,MAWA;AACD,0BACI;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAK,QAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CADJ,eAEI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAJJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BALJ,CADJ,EASQ,KAAKP,KAAL,CAAWC,wBAAX,CAAoCyB,GAApC,CAA0CC,GAAD,iBACrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAIA,GAAG,CAACC,eAAR,CADJ,uBAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAID,GAAG,CAACE,WAAR,CAFJ,uBAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAIC,IAAI,CAACC,IAAL,CAAWD,IAAI,CAACE,GAAL,CAAS,IAAIC,IAAJ,CAASN,GAAG,CAACO,aAAb,IAA8BD,IAAI,CAACE,GAAL,EAAvC,KAAsD,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAvE,CAAX,CAAJ,YAHJ,uBAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAIR,GAAG,CAACS,aAAR,CAJJ,uBAKI,oBAAC,SAAD,CAAW,MAAX;AAAkB,QAAA,EAAE,EAAE3C,MAAtB;AAA8B,QAAA,OAAO,EAAC,MAAtC;AAA6C,QAAA,QAAQ,EAAEkC,GAAG,CAACC,eAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BALJ,CADJ,eAQI,oBAAC,SAAD,CAAW,QAAX;AAAoB,QAAA,QAAQ,EAAED,GAAG,CAACC,eAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAAyBD,GAAG,CAACU,gBAA7B,CADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAWV,GAAG,CAACW,KAAf,CAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAaX,GAAG,CAACY,OAAjB,CAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAsB,IAAIN,IAAJ,CAASN,GAAG,CAACO,aAAb,EAA4BM,kBAA5B,EAAtB,CAJJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAoB,IAAIP,IAAJ,CAASN,GAAG,CAACc,YAAb,EAA2BD,kBAA3B,EAApB,CALJ,CADJ,CARJ,CADJ,CATR,CAFJ,CADJ,eAmCI;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CADJ,eAEI,oBAAC,KAAD;AAAO,QAAA,SAAS,EAAC,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAJJ,CADJ,CADJ,EAUQ,KAAKxC,KAAL,CAAWE,qBAAX,CAAiCwB,GAAjC,CAAuCC,GAAD,iBAClC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKA,GAAG,CAACC,eAAT,CADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKD,GAAG,CAACE,WAAT,CAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKC,IAAI,CAACC,IAAL,CAAWD,IAAI,CAACE,GAAL,CAAS,IAAIC,IAAJ,CAASN,GAAG,CAACc,YAAb,IAA6B,IAAIR,IAAJ,CAASN,GAAG,CAACO,aAAb,CAAtC,CAAD,IAAwE,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAzF,CAAV,CAAL,CAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKP,GAAG,CAACS,aAAT,CAJJ,CADJ,CADJ,CADJ,CAVR,CAFJ,CAnCJ,CADJ;AAiEH;AACJ;;AAhJsC;;AAoJ3C,eAAexC,YAAf","sourcesContent":["import React from 'react'\r\nimport {Table, Button, Accordion} from 'react-bootstrap'\r\n//import { ListGroup, ButtonGroup, Card } from 'react-bootstrap'\r\nimport './Accettazione.css'\r\n\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nclass Accettazione extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            apiResponse_accettazione: [],\r\n            apiResponse_accettate: [],\r\n            email_prop: localStorage.getItem('email'),\r\n            error: false,\r\n            errorMessage: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const data = {\r\n            ref_proprietario: this.state.email_prop\r\n        };\r\n\r\n        fetch('http://localhost:9000/getPrenotazioniAccettazione/prenotazioniAccettazione', {\r\n            method: \"POST\",\r\n            headers: {\r\n                'Content-type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n        .then((result) => result.text())\r\n        .then((result) => {\r\n            this.setState({ apiResponse_accettazione: JSON.parse(result) });\r\n        \r\n            if(this.state.apiResponse_accettazione.status === 'error') {\r\n                this.setState({ error: true });\r\n                this.setState({ errorMessage: this.state.apiResponse_accettazione.message });\r\n            }\r\n        });\r\n\r\n        fetch('http://localhost:9000/getPrenotazioniAccettate/prenotazioniAccettate', {\r\n            method: \"POST\",\r\n            headers: {\r\n                'Content-type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n        .then((result) => result.text())\r\n        .then((result) => {\r\n            this.setState({ apiResponse_accettate: JSON.parse(result) });\r\n        \r\n            if(this.state.apiResponse_accettate.status === 'error') {\r\n                this.setState({ error: true });\r\n                this.setState({ errorMessage: this.state.apiResponse_accettate.message });\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        if(!localStorage.getItem('logged') || !localStorage.getItem('proprietario')) {\r\n            return <Redirect\r\n                to={{\r\n                    pathname: \"/ErrorPage\",\r\n                    state: { \r\n                        error: true,\r\n                        errorMessage: \"Utente non autorizzato\" \r\n                    }\r\n                }}\r\n            />\r\n        }\r\n        else if(this.state.error) {\r\n            return <Redirect\r\n                to={{\r\n                    pathname: \"/ErrorPage\",\r\n                    state: { \r\n                        error: true,\r\n                        errorMessage: this.state.errorMessage \r\n                    }\r\n                }}\r\n            />\r\n        }\r\n        else {\r\n            return(\r\n                <div className=\"accettazione\">\r\n                    <div className=\"containerAccettazione\">\r\n                        <h1>Ecco le prenotazioni da accettare</h1>\r\n                        <Accordion>\r\n                            <div className=\"testa_accordo\">\r\n                                <p>ID</p>\r\n                                <p>Cliente</p>\r\n                                <p>Tempo rimanente</p>\r\n                                <p>Struttura</p>\r\n                                <p>Visualizza dettagli</p>\r\n                            </div>\r\n                            {\r\n                                this.state.apiResponse_accettazione.map(((res) => \r\n                                    <div>\r\n                                        <div className=\"testa_accordo\">\r\n                                            <p>{res.id_prenotazione}</p>&nbsp;\r\n                                            <p>{res.ref_cliente}</p>&nbsp;\r\n                                            <p>{Math.ceil((Math.abs(new Date(res.data_partenza) - Date.now()) / (1000 * 60 * 60 * 24)))} giorni</p>&nbsp;\r\n                                            <p>{res.ref_proprieta}</p>&nbsp;\r\n                                            <Accordion.Toggle as={Button} variant=\"link\" eventKey={res.id_prenotazione}>visualizza dettagli</Accordion.Toggle>\r\n                                        </div>\r\n                                        <Accordion.Collapse eventKey={res.id_prenotazione}>\r\n                                            <div className=\"corpo_accordo\">\r\n                                                <p>Numero soggiornanti: {res.num_soggiornanti}</p>    \r\n                                                <p>Costo: {res.costo}</p>\r\n                                                <p>Caparra: {res.caparra}</p>\r\n                                                <p>Inizio soggiorno: {new Date(res.data_partenza).toLocaleDateString()}</p>\r\n                                                <p>Fine soggiorno: {new Date(res.data_ritorno).toLocaleDateString()}</p>\r\n                                            </div>                     \r\n                                        </Accordion.Collapse>\r\n                                    </div>\r\n                                ))\r\n                            }\r\n                        </Accordion>\r\n                    </div>\r\n                    <div className=\"listaAccettazioni\">\r\n                        <h1>Ecco le prenotazioni accettate</h1>\r\n                        <Table className=\"tabella\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>ID </th>\r\n                                    <th>Cliente</th>\r\n                                    <th>Durata soggiorno</th>\r\n                                    <th>Struttura</th>\r\n                                </tr>\r\n                            </thead>\r\n                            {\r\n                                this.state.apiResponse_accettate.map(((res) => \r\n                                    <div>\r\n                                        <tbody>\r\n                                            <tr>\r\n                                                <th>{res.id_prenotazione}</th>\r\n                                                <th>{res.ref_cliente}</th>\r\n                                                <th>{Math.ceil((Math.abs(new Date(res.data_ritorno) - new Date(res.data_partenza))) / (1000 * 60 * 60 * 24))}</th>\r\n                                                <th>{res.ref_proprieta}</th>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </div>\r\n                                ))\r\n                            }\r\n                        </Table>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default Accettazione;"]},"metadata":{},"sourceType":"module"}