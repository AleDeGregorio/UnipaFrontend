{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexd\\\\Documents\\\\Progetto-Unipa\\\\Frontend\\\\src\\\\GestioneProprietario\\\\Modifica\\\\ElencoListaStanze.js\";\nimport React, { Component } from 'react';\nimport List from './List';\nimport { createGlobalStyle } from 'styled-components'; //import styled from 'styled-components'\n\nimport { Redirect } from 'react-router-dom';\nconst GlobalStyle = createGlobalStyle`\n  @font-face {\n    font-family: \"Montserrat\";\n    src: url('https://fonts.googleapis.com/css?family=Montserrat:400,700');\n  }\n  * {\n    margin: 0;\n\t  padding: 0;\n    font-family: \"Montserrat\", sans-serif;\n    box-sizing: border-box;\n  }\n  body {\n    background-color: #f5f5f5;\n  }\n`;\n\nclass ElencoListaStanze extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dati_bb: this.props.history.location.state ? this.props.history.location.state.dati_bb : '',\n      apiResponse: [],\n      error: false,\n      errorMessage: ''\n    };\n  }\n\n  componentDidMount() {\n    const data = {\n      ref_bb: this.state.dati_bb.id_proprieta\n    };\n    fetch('http://localhost:9000/searchStanzaBB/stanzaBB', {\n      method: \"POST\",\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(result => result.text()).then(result => {\n      this.setState({\n        apiResponse: JSON.parse(result)\n      });\n\n      if (this.state.apiResponse.status === 'error') {\n        this.setState({\n          error: true\n        });\n        this.setState({\n          errorMessage: this.state.apiResponse.message\n        });\n      }\n    });\n  }\n\n  render() {\n    if (!localStorage.getItem('logged') || !localStorage.getItem('proprietario')) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/ErrorPage\",\n          state: {\n            error: true,\n            errorMessage: \"Utente non autorizzato\"\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 14\n        }\n      });\n    } else if (this.state.error) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/ErrorPage\",\n          state: {\n            error: true,\n            errorMessage: this.state.errorMessage\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 12\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(GlobalStyle, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(List, {\n        dati_stanza: this.state.apiResponse,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 9\n        }\n      }));\n    }\n  }\n\n}\n\nexport default ElencoListaStanze;","map":{"version":3,"sources":["C:/Users/alexd/Documents/Progetto-Unipa/Frontend/src/GestioneProprietario/Modifica/ElencoListaStanze.js"],"names":["React","Component","List","createGlobalStyle","Redirect","GlobalStyle","ElencoListaStanze","constructor","props","state","dati_bb","history","location","apiResponse","error","errorMessage","componentDidMount","data","ref_bb","id_proprieta","fetch","method","headers","body","JSON","stringify","then","result","text","setState","parse","status","message","render","localStorage","getItem","pathname"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport List from './List'\r\nimport { createGlobalStyle } from 'styled-components'\r\n//import styled from 'styled-components'\r\n\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n  @font-face {\r\n    font-family: \"Montserrat\";\r\n    src: url('https://fonts.googleapis.com/css?family=Montserrat:400,700');\r\n  }\r\n  * {\r\n    margin: 0;\r\n\t  padding: 0;\r\n    font-family: \"Montserrat\", sans-serif;\r\n    box-sizing: border-box;\r\n  }\r\n  body {\r\n    background-color: #f5f5f5;\r\n  }\r\n`\r\n\r\n\r\nclass  ElencoListaStanze extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      dati_bb: this.props.history.location.state ? this.props.history.location.state.dati_bb : '',\r\n      apiResponse: [],\r\n      error: false,\r\n      errorMessage: ''\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const data = {\r\n      ref_bb: this.state.dati_bb.id_proprieta\r\n    }\r\n\r\n    fetch('http://localhost:9000/searchStanzaBB/stanzaBB', {\r\n        method: \"POST\",\r\n        headers: {\r\n            'Content-type': 'application/json'\r\n        },\r\n        body: JSON.stringify(data)\r\n    })\r\n    .then((result) => result.text())\r\n    .then((result) => {\r\n        this.setState({ apiResponse: JSON.parse(result) });\r\n    \r\n        if(this.state.apiResponse.status === 'error') {\r\n            this.setState({ error: true });\r\n            this.setState({ errorMessage: this.state.apiResponse.message });\r\n        }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if(!localStorage.getItem('logged') || !localStorage.getItem('proprietario')) {\r\n      return <Redirect\r\n          to={{\r\n              pathname: \"/ErrorPage\",\r\n              state: { \r\n                  error: true,\r\n                  errorMessage: \"Utente non autorizzato\" \r\n              }\r\n          }}\r\n      />\r\n  }\r\n  else if(this.state.error) {\r\n    return <Redirect \r\n      to = {{\r\n        pathname: \"/ErrorPage\",\r\n        state: {\r\n          error: true,\r\n          errorMessage: this.state.errorMessage\r\n        }\r\n      }}\r\n    />\r\n  }\r\n  else {\r\n    return (\r\n      <>\r\n        <GlobalStyle />\r\n       \r\n        <List dati_stanza = {this.state.apiResponse} />\r\n       \r\n      </>\r\n    );\r\n  }\r\n  }\r\n}\r\n\r\nexport default ElencoListaStanze;"]},"metadata":{},"sourceType":"module"}