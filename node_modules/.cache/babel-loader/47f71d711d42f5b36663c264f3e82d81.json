{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexd\\\\Documents\\\\Progetto-Unipa\\\\Frontend\\\\src\\\\GestioneUtente\\\\GestionePrenotazione.js\";\nimport React from 'react';\nimport './GestionePrenotazione.css';\nimport { Card, Accordion, Button, Form, Col } from 'react-bootstrap'; //import { CardColumn, ListGroup, ListGroupItem } from 'react-bootstrap'\n\nimport { Redirect } from 'react-router-dom';\n\nclass GestionePrenotazione extends React.Component {\n  constructor(props) {\n    //props : stati delle componenti parent\n    super(props);\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.set_id = e => {\n      this.setState({\n        id_prenotazione: e\n      });\n    };\n\n    this.set_emailProprietario = e => {\n      this.setState({\n        ref_proprietario: e\n      });\n    };\n\n    this.onSubmitModifica = e => {\n      e.preventDefault();\n      const data = {\n        id_prenotazione: this.state.id_prenotazione,\n        data_partenza: this.state.data_partenza,\n        data_ritorno: this.state.data_ritorno\n      };\n      fetch('http://localhost:9000/updateDatePrenotazione/newDate', {\n        method: \"POST\",\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(result => result.text()).then(result => {\n        this.setState({\n          apiResponse: JSON.parse(result)\n        });\n        var res = JSON.parse(result);\n\n        if (res.length < 1 || res.code && res.code === 404) {\n          this.setState({\n            empty: true,\n            errorMessage: res.message\n          });\n        } else if (this.state.apiResponse.status === 'error') {\n          this.setState({\n            error: true\n          });\n          this.setState({\n            errorMessage: this.state.apiResponse.message\n          });\n        } else {\n          this.setState({\n            success: true\n          });\n        }\n      });\n    };\n\n    this.onSubmitElimina = e => {\n      e.preventDefault();\n      const data = {\n        id_prenotazione: this.state.id_prenotazione\n      };\n      fetch('http://localhost:9000/deletePrenotazione/delete', {\n        method: \"POST\",\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(result => result.text()).then(result => {\n        this.setState({\n          apiResponse: JSON.parse(result)\n        });\n        var res = JSON.parse(result);\n\n        if (res.length < 1 || res.code && res.code === 404) {\n          this.setState({\n            empty: true,\n            errorMessage: res.message\n          });\n        } else if (this.state.apiResponse.status === 'error') {\n          this.setState({\n            error: true\n          });\n          this.setState({\n            errorMessage: this.state.apiResponse.message\n          });\n        } else {\n          this.setState({\n            success: true\n          });\n        }\n      });\n    };\n\n    this.state = {\n      id_prenotazione: '',\n      data_partenza: '',\n      data_ritorno: '',\n      ref_proprietario: '',\n      email: localStorage.getItem('email'),\n      //variabili di cui abbiamo bisogno\n      apiResponse: [],\n      error: false,\n      errorMessage: '',\n      empty: false\n    };\n  }\n\n  componentDidMount() {\n    //interrogazione che viene effettuata all'apertura della pagina\n    const data = {\n      ref_cliente: this.state.email\n    }; //body richiesta http (in questo caso chiave primaria cioè ref_cliente)\n\n    fetch('http://localhost:9000/searchPrenotazioneCliente/prenotazioneCliente', {\n      //metodo http in fetch\n      method: 'POST',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(result => result.text()) //risultato interrogazione \n    .then(result => {\n      this.setState({\n        apiResponse: JSON.parse(result)\n      }); //rende array il risultato\n\n      var res = JSON.parse(result);\n\n      if (res.length < 1 || res.code && res.code === 404) {\n        this.setState({\n          empty: true,\n          errorMessage: res.message\n        });\n      } else if (this.state.apiResponse.status === 'error') {\n        this.setState({\n          error: true\n        });\n        this.setState({\n          errorMessage: this.state.apiResponse.message\n        });\n      }\n    });\n  }\n\n  render() {\n    if (!localStorage.getItem('logged') || !localStorage.getItem('cliente')) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/ErrorPage\",\n          state: {\n            error: true,\n            errorMessage: \"Utente non autorizzato\"\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 20\n        }\n      });\n    } else if (this.state.error) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/ErrorPage\",\n          state: {\n            error: true,\n            errorMessage: this.state.errorMessage\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 20\n        }\n      });\n    } else if (this.state.empty) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"containerGP\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 25\n        }\n      }, \"Gestisci le tue prenotazioni\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 25\n        }\n      }, \"Si \\xE8 verificato un errore: \", this.state.errorMessage)));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"containerGP\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 25\n        }\n      }, \"Gestisci le tue prenotazioni\"), /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 25\n        }\n      }, \"Le tue prenotazioni: \"), this.state.apiResponse.map(res => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"containeracc\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Accordion, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        border: \"light\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"headcac\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 49\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 53\n        }\n      }, \"ID: \", res.id_prenotazione), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 53\n        }\n      }, \"Partenza: \", new Date(res.data_partenza).toLocaleDateString()), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 53\n        }\n      }, \"Ritorno: \", new Date(res.data_ritorno).toLocaleDateString()), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 53\n        }\n      }, \"Stato: \", res.accettata === null ? 'In attesa di accettazione' : res.accettata === 1 ? 'Accettata' : 'Rifiutata'), /*#__PURE__*/React.createElement(Accordion.Toggle, {\n        as: Button,\n        variant: \"link\",\n        eventKey: \"0\",\n        onClick: () => this.set_id(res.id_prenotazione),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 53\n        }\n      }, \"Dettagli\")), /*#__PURE__*/React.createElement(Accordion.Collapse, {\n        eventKey: \"0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(Card.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 49\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 53\n        }\n      }, \"Dettagli struttura \"), /*#__PURE__*/React.createElement(Card, {\n        className: \"propcard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 53\n        }\n      }, /*#__PURE__*/React.createElement(Card.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 53\n        }\n      }, /*#__PURE__*/React.createElement(Card.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 53\n        }\n      }, res.nome_proprieta), /*#__PURE__*/React.createElement(Card.Img, {\n        src: res.img,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 53\n        }\n      }), /*#__PURE__*/React.createElement(Card.Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 53\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 53\n        }\n      }, \"Codice struttura: \", res.ref_proprieta, \", Tipo struttura: \", res.tipo_proprieta === 'bb' ? 'B&B' : 'Casa vacanza'), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          display: res.tipo_proprieta === 'bb' ? 'inline' : 'none'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 53\n        }\n      }, \"Codice stanza: \", res.id_stanza), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 53\n        }\n      }, \"Localit\\xE0: \", res.localita, \" (\", res.provincia, \"),Indirizzo: \", res.indirizzo), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 53\n        }\n      }, \"Costo: \", res.costo, \" euro\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 53\n        }\n      }, \"Soggiornante: \", res.nome_sogg, \" \", res.cognome_sogg)))), /*#__PURE__*/React.createElement(Accordion, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 53\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"acc3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 57\n        }\n      }, /*#__PURE__*/React.createElement(Accordion.Toggle, {\n        as: Button,\n        onClick: this.nomeFunzione,\n        variant: \"link\",\n        eventKey: \"1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 61\n        }\n      }, \"Modifica data prenotazione\"), /*#__PURE__*/React.createElement(Accordion.Toggle, {\n        as: Button,\n        variant: \"link\",\n        eventKey: \"2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 61\n        }\n      }, \"Elimina prenotazione\"), /*#__PURE__*/React.createElement(Accordion.Toggle, {\n        as: Button,\n        variant: \"link\",\n        eventKey: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 61\n        }\n      }, \"Contatta il gestore\"), /*#__PURE__*/React.createElement(Accordion.Collapse, {\n        eventKey: \"1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 61\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tisfunnu\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 65\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 65\n        }\n      }, /*#__PURE__*/React.createElement(Form.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 69\n        }\n      }, /*#__PURE__*/React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"formGridDate\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 73\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 77\n        }\n      }, \"Data di inizio\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"date\",\n        placeholder: \"Inserisci data di inizio\",\n        id: \"data_partenza\",\n        name: \"data_partenza\",\n        onChange: this.onChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 77\n        }\n      })), /*#__PURE__*/React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"formGridDate1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 73\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 77\n        }\n      }, \"Data fine\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"date\",\n        placeholder: \"Inserisci data di fine\",\n        id: \"data_ritorno\",\n        name: \"data_ritorno\",\n        onChange: this.onChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 77\n        }\n      })))), /*#__PURE__*/React.createElement(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 65\n        }\n      }, \"Modifica data\"))), /*#__PURE__*/React.createElement(Accordion.Collapse, {\n        eventKey: \"2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 61\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 65\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 69\n        }\n      }, \"Sei sicuro di voler eliminare la tua prenotazione? Non riavrai indietro la caparra.\"), /*#__PURE__*/React.createElement(Button, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 69\n        }\n      }, \"Conferma\"), /*#__PURE__*/React.createElement(Button, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 69\n        }\n      }, \"Annulla\"))), /*#__PURE__*/React.createElement(Accordion.Collapse, {\n        eventKey: \"3\",\n        onClick: () => this.set_emailProprietario(res.ref_proprietario),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 61\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 65\n        }\n      }, /*#__PURE__*/React.createElement(Form.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 69\n        }\n      }, /*#__PURE__*/React.createElement(Form.Group, {\n        controlId: \"formGridContact\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 73\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 77\n        }\n      }, \"Inserisci email\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"email\",\n        placeholder: \"Inserisci tua email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 77\n        }\n      }), /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 77\n        }\n      }, \"Inserisci messaggio da inviare al gestore\"), /*#__PURE__*/React.createElement(Form.Control, {\n        as: \"textarea\",\n        placeholder: \"Inserisci testo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 77\n        }\n      }))), /*#__PURE__*/React.createElement(Button, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 69\n        }\n      }, \"Invia comunicazione\")))))))))))));\n    }\n  }\n\n}\n\nexport default GestionePrenotazione;","map":{"version":3,"sources":["C:/Users/alexd/Documents/Progetto-Unipa/Frontend/src/GestioneUtente/GestionePrenotazione.js"],"names":["React","Card","Accordion","Button","Form","Col","Redirect","GestionePrenotazione","Component","constructor","props","onChange","e","setState","target","name","value","set_id","id_prenotazione","set_emailProprietario","ref_proprietario","onSubmitModifica","preventDefault","data","state","data_partenza","data_ritorno","fetch","method","headers","body","JSON","stringify","then","result","text","apiResponse","parse","res","length","code","empty","errorMessage","message","status","error","success","onSubmitElimina","email","localStorage","getItem","componentDidMount","ref_cliente","render","pathname","map","Date","toLocaleDateString","accettata","nome_proprieta","img","ref_proprieta","tipo_proprieta","display","id_stanza","localita","provincia","indirizzo","costo","nome_sogg","cognome_sogg","nomeFunzione"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport './GestionePrenotazione.css'\r\nimport {Card, Accordion, Button, Form, Col} from 'react-bootstrap'\r\n//import { CardColumn, ListGroup, ListGroupItem } from 'react-bootstrap'\r\n\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nclass GestionePrenotazione extends React.Component {\r\n    constructor(props) {     //props : stati delle componenti parent\r\n        super(props);\r\n        this.state = {\r\n            id_prenotazione: '',\r\n            data_partenza: '',\r\n            data_ritorno: '',\r\n            ref_proprietario: '',\r\n            email: localStorage.getItem('email'),  //variabili di cui abbiamo bisogno\r\n            apiResponse: [] ,\r\n            error: false,\r\n            errorMessage: '',\r\n            empty: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() { //interrogazione che viene effettuata all'apertura della pagina\r\n        const data = {\r\n            ref_cliente: this.state.email\r\n        }; //body richiesta http (in questo caso chiave primaria cioè ref_cliente)\r\n\r\n        fetch('http://localhost:9000/searchPrenotazioneCliente/prenotazioneCliente', { //metodo http in fetch\r\n            method:'POST',\r\n            headers:{\r\n                'Content-type':'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n        .then((result)=> result.text())                  //risultato interrogazione \r\n        .then((result)=> {\r\n            this.setState({ apiResponse:JSON.parse(result) }); //rende array il risultato\r\n            var res = JSON.parse(result);\r\n\r\n            if(res.length < 1 || (res.code && res.code === 404)) {\r\n              this.setState({ empty: true, errorMessage: res.message });\r\n            }\r\n      \r\n            else if(this.state.apiResponse.status === 'error') {\r\n              this.setState({ error: true });\r\n              this.setState({ errorMessage: this.state.apiResponse.message });\r\n            }\r\n        })\r\n   }\r\n\r\n   onChange = (e) => {\r\n        this.setState({ [e.target.name]: e.target.value });\r\n    }\r\n\r\n    set_id = (e) => {\r\n        this.setState({ id_prenotazione: e })\r\n    }\r\n\r\n    set_emailProprietario = (e) => {\r\n        this.setState({ ref_proprietario: e })\r\n    }\r\n\r\n    onSubmitModifica = (e) => {\r\n        e.preventDefault();\r\n\r\n        const data = {\r\n            id_prenotazione: this.state.id_prenotazione,\r\n            data_partenza: this.state.data_partenza,\r\n            data_ritorno: this.state.data_ritorno\r\n        }\r\n\r\n        fetch('http://localhost:9000/updateDatePrenotazione/newDate', {\r\n            method: \"POST\",\r\n            headers: {\r\n                'Content-type' : 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n        .then((result) => result.text())\r\n        .then((result)=>{\r\n            this.setState({ apiResponse:JSON.parse(result) });\r\n            var res = JSON.parse(result);\r\n\r\n            if(res.length < 1 || (res.code && res.code === 404)) {\r\n              this.setState({ empty: true, errorMessage: res.message });\r\n            }\r\n      \r\n            else if(this.state.apiResponse.status === 'error') {\r\n              this.setState({ error: true });\r\n              this.setState({ errorMessage: this.state.apiResponse.message });\r\n            }\r\n            else {\r\n                this.setState({ success: true })\r\n            }\r\n        });\r\n    }\r\n\r\n    onSubmitElimina = (e) => {\r\n        e.preventDefault();\r\n\r\n        const data = {\r\n            id_prenotazione: this.state.id_prenotazione,\r\n        }\r\n\r\n        fetch('http://localhost:9000/deletePrenotazione/delete', {\r\n            method: \"POST\",\r\n            headers: {\r\n                'Content-type' : 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n        .then((result) => result.text())\r\n        .then((result)=>{\r\n            this.setState({ apiResponse:JSON.parse(result) });\r\n            var res = JSON.parse(result);\r\n\r\n            if(res.length < 1 || (res.code && res.code === 404)) {\r\n              this.setState({ empty: true, errorMessage: res.message });\r\n            }\r\n      \r\n            else if(this.state.apiResponse.status === 'error') {\r\n              this.setState({ error: true });\r\n              this.setState({ errorMessage: this.state.apiResponse.message });\r\n            }\r\n            else {\r\n                this.setState({ success: true })\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        if(!localStorage.getItem('logged') || !localStorage.getItem('cliente')) {\r\n            return <Redirect\r\n                to={{\r\n                    pathname: \"/ErrorPage\",\r\n                    state: { \r\n                        error: true,\r\n                        errorMessage: \"Utente non autorizzato\" \r\n                    }\r\n                }}\r\n            />\r\n        }\r\n        else if(this.state.error) {\r\n            return <Redirect\r\n                to={{\r\n                    pathname: \"/ErrorPage\",\r\n                    state: { \r\n                        error: true,\r\n                        errorMessage: this.state.errorMessage \r\n                    }\r\n                }}\r\n            />\r\n        }\r\n        else if(this.state.empty) {\r\n            return (\r\n                <div className=\"containerGP\">\r\n                    <div>\r\n                        <h1>Gestisci le tue prenotazioni</h1>\r\n                        <p>Si è verificato un errore: {this.state.errorMessage}</p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n        else {\r\n            return (\r\n                <div className=\"containerGP\">\r\n                    <div>\r\n                        <h1>Gestisci le tue prenotazioni</h1>\r\n                        <h5>Le tue prenotazioni: </h5>\r\n                        {        \r\n                            this.state.apiResponse.map(((res)=> \r\n                                <div className=\"containeracc\">\r\n                                    <Accordion>\r\n                                        <Card border=\"light\">\r\n                                                <div className=\"headcac\">\r\n                                                    <p>ID: {res.id_prenotazione}</p>\r\n                                                    <p>Partenza: {new Date(res.data_partenza).toLocaleDateString()}</p>\r\n                                                    <p>Ritorno: {new Date(res.data_ritorno).toLocaleDateString()}</p>\r\n                                                    <p>Stato: {res.accettata === null ? 'In attesa di accettazione' : (res.accettata === 1 ? 'Accettata' : 'Rifiutata')}</p>\r\n                                                    <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"0\" onClick = {() => this.set_id(res.id_prenotazione)}>\r\n                                                        Dettagli\r\n                                                    </Accordion.Toggle>\r\n                                                </div>\r\n                                            <Accordion.Collapse eventKey=\"0\">\r\n                                                <Card.Body>\r\n                                                    <h4>Dettagli struttura </h4>\r\n                                                    <Card className=\"propcard\">\r\n                                                    <Card.Body>\r\n                                                    <Card.Title>{res.nome_proprieta}</Card.Title>\r\n                                                    <Card.Img src={res.img}/>\r\n                                                    <Card.Text>\r\n                                                    <p>Codice struttura: {res.ref_proprieta}, Tipo struttura: {res.tipo_proprieta === 'bb' ? 'B&B' : 'Casa vacanza'}</p>\r\n                                                    <p style = {{display: res.tipo_proprieta === 'bb' ? 'inline' : 'none'}}>Codice stanza: {res.id_stanza}</p>\r\n                                                    <p>Località: {res.localita} ({res.provincia}),Indirizzo: {res.indirizzo}</p>\r\n                                                    <p>Costo: {res.costo} euro</p>\r\n                                                    <p>Soggiornante: {res.nome_sogg} {res.cognome_sogg}</p>\r\n                                                    </Card.Text>\r\n                                                    </Card.Body>\r\n                                                    </Card>\r\n                                                   \r\n                                                    \r\n                                                    <Accordion>\r\n                                                        <div className=\"acc3\">\r\n                                                            <Accordion.Toggle as={Button} onClick={this.nomeFunzione} variant=\"link\" eventKey=\"1\">Modifica data prenotazione</Accordion.Toggle>\r\n                                                            <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"2\">Elimina prenotazione</Accordion.Toggle>\r\n                                                            <Accordion.Toggle as={Button} variant=\"link\" eventKey=\"3\">Contatta il gestore</Accordion.Toggle>\r\n\r\n                                                            <Accordion.Collapse eventKey=\"1\">\r\n                                                                <div className=\"tisfunnu\">\r\n                                                                <Form>\r\n                                                                    <Form.Row>\r\n                                                                        <Form.Group as={Col} controlId=\"formGridDate\">\r\n                                                                            <Form.Label>Data di inizio</Form.Label>\r\n                                                                            <Form.Control \r\n                                                                                type=\"date\" \r\n                                                                                placeholder=\"Inserisci data di inizio\" \r\n                                                                                id = 'data_partenza'\r\n                                                                                name = 'data_partenza'\r\n                                                                                onChange = {this.onChange}\r\n                                                                            />\r\n                                                                        </Form.Group>\r\n                                                                        <Form.Group as={Col} controlId=\"formGridDate1\">\r\n                                                                            <Form.Label>Data fine</Form.Label>\r\n                                                                            <Form.Control \r\n                                                                                type=\"date\" \r\n                                                                                placeholder=\"Inserisci data di fine\" \r\n                                                                                id = 'data_ritorno'\r\n                                                                                name = 'data_ritorno'\r\n                                                                                onChange = {this.onChange}\r\n                                                                            />\r\n                                                                        </Form.Group>\r\n                                                                    </Form.Row>\r\n                                                                </Form>\r\n                                                                <Button variant=\"primary\" type=\"submit\">\r\n                                                                Modifica data\r\n                                                                 </Button>\r\n                                                                 </div>\r\n                                                            </Accordion.Collapse>\r\n\r\n                                                            <Accordion.Collapse eventKey=\"2\">\r\n                                                                <div>\r\n                                                                    <p>Sei sicuro di voler eliminare la tua prenotazione? Non riavrai indietro la caparra.</p>\r\n                                                                    <Button>Conferma</Button>\r\n                                                                    <Button>Annulla</Button>\r\n                                                                </div>\r\n                                                            </Accordion.Collapse>\r\n\r\n                                                            <Accordion.Collapse eventKey=\"3\" onClick = {() => this.set_emailProprietario(res.ref_proprietario)}>\r\n                                                                <Form>\r\n                                                                    <Form.Row>\r\n                                                                        <Form.Group controlId=\"formGridContact\">\r\n                                                                            <Form.Label>Inserisci email</Form.Label>\r\n                                                                            <Form.Control type=\"email\" placeholder=\"Inserisci tua email\" />\r\n                                                                            <Form.Label>Inserisci messaggio da inviare al gestore</Form.Label>\r\n                                                                            <Form.Control as=\"textarea\" placeholder=\"Inserisci testo\" />\r\n                                                                        </Form.Group>\r\n                                                                    </Form.Row>\r\n                                                                    <Button>Invia comunicazione</Button>\r\n                                                                </Form>\r\n                                                            </Accordion.Collapse>\r\n                                                        </div>\r\n                                                    </Accordion>\r\n                                                </Card.Body>\r\n                                            </Accordion.Collapse>\r\n                                        </Card>\r\n                                    </Accordion>\r\n                                </div>\r\n                            )) \r\n                        }   \r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\nexport default GestionePrenotazione;"]},"metadata":{},"sourceType":"module"}