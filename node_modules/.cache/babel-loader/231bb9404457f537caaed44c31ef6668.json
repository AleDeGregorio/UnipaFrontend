{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexd\\\\Documents\\\\Progetto-Unipa\\\\Frontend\\\\src\\\\GestioneProprietario\\\\Modifica\\\\ModificaB&B.js\";\n\n/*CSS FATTO*/\nimport React from \"react\"; //import camera from \"../assets/camera.svg\";   \n\nimport { Button } from \"react-bootstrap\"; //import { Form } from 'react-bootstrap'\n\nimport \"../InserisciProp/InserimentoProprietà.css\";\nimport { Redirect } from 'react-router-dom';\n\nclass ModificaBeB extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.onSubmit = e => {\n      const data1 = {\n        nome_proprieta: this.state.nome_proprieta,\n        indirizzo: this.state.indirizzo,\n        localita: this.state.localita,\n        provincia: this.state.provincia,\n        tipo_proprieta: this.state.tipo_proprieta,\n        servizi: this.state.servizi,\n        ref_proprietario: this.state.ref_proprietario,\n        descrizione: this.state.descrizione,\n        id_proprieta: this.state.id_proprieta\n      };\n      fetch('http://localhost:9000/updateProprieta/fields', {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify(data1)\n      }).then(result => {\n        result.text();\n      }).then(result => {\n        this.setState({\n          apiResponse: result\n        });\n\n        if (this.state.apiResponse && this.state.apiResponse.status === 'error') {\n          this.setState({\n            error: true,\n            errorMessage: this.state.apiResponse.message\n          });\n        } else {\n          const data2 = {\n            check_in: this.state.check_in,\n            check_out: this.state.check_out,\n            ref_proprieta_bb: this.state.ref_proprieta_bb\n          };\n          fetch('http://localhost:9000/updateBB/fields', {\n            method: 'POST',\n            headers: {\n              'Content-type': 'application/json'\n            },\n            body: JSON.stringify(data2)\n          }).then(result => result.text()).then(result => {\n            this.setState({\n              apiResponse: result\n            });\n\n            if (this.state.apiResponse && this.state.apiResponse.status === 'error') {\n              this.setState({\n                error: true,\n                errorMessage: this.state.apiResponse.message\n              });\n            } else {\n              this.setState({\n                success: true\n              });\n            }\n          });\n        }\n      });\n    };\n\n    this.state = {\n      dati_bb: this.props.history.location.state ? this.props.history.location.state.dati_bb : '',\n      ref_proprietario: localStorage.getItem('email'),\n      id_proprieta: this.props.history.location.state ? this.props.history.location.state.dati_bb.id_proprieta : '',\n      nome_proprieta: this.props.history.location.state ? this.props.history.location.state.dati_bb.nome_proprieta : '',\n      indirizzo: this.props.history.location.state ? this.props.history.location.state.dati_bb.indirizzo : '',\n      localita: this.props.history.location.state ? this.props.history.location.state.dati_bb.localita : '',\n      provincia: this.props.history.location.state ? this.props.history.location.state.dati_bb.provincia : '',\n      tipo_proprieta: this.props.history.location.state ? this.props.history.location.state.dati_bb.tipo_proprieta : '',\n      servizi: this.props.history.location.state ? this.props.history.location.state.dati_bb.servizi : '',\n      descrizione: this.props.history.location.state ? this.props.history.location.state.dati_bb.descrizione : '',\n      ref_proprieta_bb: this.props.history.location.state ? this.props.history.location.state.dati_bb.ref_proprieta_bb : '',\n      check_in: this.props.history.location.state ? this.props.history.location.state.dati_bb.check_in : '',\n      check_out: this.props.history.location.state ? this.props.history.location.state.dati_bb.check_out : '',\n      apiResponse: [],\n      error: false,\n      errorMessage: '',\n      success: false\n    };\n  }\n\n  render() {\n    if (!localStorage.getItem('logged') || !localStorage.getItem('proprietario')) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/ErrorPage\",\n          state: {\n            error: true,\n            errorMessage: \"Utente non autorizzato\"\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 14\n        }\n      });\n    } else if (this.state.error) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/ErrorPage\",\n          state: {\n            error: true,\n            errorMessage: this.state.errorMessage\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 14\n        }\n      });\n    } else if (this.state.success) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Errore\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }\n      }, \"Modifiche avvenute con successo!\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }\n      }, \"Il tuo B&B \\xE8 stato modificato correttamente all'interno del sistema\"));\n    } else {\n      var bb = this.state.dati_bb ? this.state.dati_bb : '';\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"background\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"containerNew\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"contentNew\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }\n      }, \"Modifica il tuo B&B con le informazioni che preferisci!\"), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"nome_proprieta\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 15\n        }\n      }, \"Nome\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        id: \"nome_proprieta\",\n        name: \"nome_proprieta\",\n        defaultValue: bb.nome_proprieta,\n        onChange: this.onChange,\n        className: \"i\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"localita\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 17\n        }\n      }, \"Citt\\xE0\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        id: \"localita\",\n        name: \"localita\",\n        defaultValue: bb.localita,\n        onChange: this.onChange,\n        className: \"i\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"indirizzo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 17\n        }\n      }, \"Indirizzo\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        id: \"indirizzo\",\n        name: \"indirizzo\",\n        defaultValue: bb.indirizzo,\n        onChange: this.onChange,\n        className: \"i\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"provincia\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 17\n        }\n      }, \"Provincia\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        id: \"provincia\",\n        name: \"provincia\",\n        defaultValue: bb.provincia,\n        onChange: this.onChange,\n        className: \"i\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"servizi\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 17\n        }\n      }, \"Servizi\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        id: \"servizi\",\n        name: \"servizi\",\n        defaultValue: bb.servizi,\n        onChange: this.onChange,\n        className: \"i\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"descrizione\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 17\n        }\n      }, \"Descrizione\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        id: \"descrizione\",\n        name: \"descrizione\",\n        defaultValue: bb.descrizione,\n        onChange: this.onChange,\n        className: \"iTA\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"check_in\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 17\n        }\n      }, \"Check-in\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        pattern: \"^([0-9]|1[0-9]|2[0-3]).[0-5][0-9]$\",\n        title: \"Inserire un orario corretto, usando un punto per separare i minuti\",\n        id: \"check_in\",\n        name: \"check_in\",\n        defaultValue: bb.check_in + '0',\n        onChange: this.onChange,\n        className: \"i\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"check_out\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 17\n        }\n      }, \"Check-out\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        pattern: \"^([0-9]|1[0-9]|2[0-3]).[0-5][0-9]$\",\n        title: \"Inserire un orario corretto, usando un punto per separare i minuti\",\n        id: \"check_out\",\n        name: \"check_out\",\n        defaultValue: bb.check_out + '0',\n        onChange: this.onChange,\n        className: \"i\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        variant: \"primary\",\n        onClick: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 17\n        }\n      }, \"Carica\")))));\n    }\n  }\n\n}\n\nexport default ModificaBeB;","map":{"version":3,"sources":["C:/Users/alexd/Documents/Progetto-Unipa/Frontend/src/GestioneProprietario/Modifica/ModificaB&B.js"],"names":["React","Button","Redirect","ModificaBeB","Component","constructor","props","onChange","e","setState","target","name","value","onSubmit","data1","nome_proprieta","state","indirizzo","localita","provincia","tipo_proprieta","servizi","ref_proprietario","descrizione","id_proprieta","fetch","method","headers","body","JSON","stringify","then","result","text","apiResponse","status","error","errorMessage","message","data2","check_in","check_out","ref_proprieta_bb","success","dati_bb","history","location","localStorage","getItem","render","pathname","bb"],"mappings":"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","sourcesContent":["/*CSS FATTO*/\r\n\r\nimport React from \"react\";\r\n//import camera from \"../assets/camera.svg\";   \r\nimport { Button } from \"react-bootstrap\"\r\n//import { Form } from 'react-bootstrap'\r\n\r\nimport \"../InserisciProp/InserimentoProprietà.css\";\r\n\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nclass ModificaBeB extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      dati_bb: this.props.history.location.state ? this.props.history.location.state.dati_bb : '',\r\n      ref_proprietario: localStorage.getItem('email'),\r\n      id_proprieta: this.props.history.location.state ? this.props.history.location.state.dati_bb.id_proprieta : '',\r\n      nome_proprieta: this.props.history.location.state ? this.props.history.location.state.dati_bb.nome_proprieta : '',\r\n      indirizzo: this.props.history.location.state ? this.props.history.location.state.dati_bb.indirizzo : '',\r\n      localita: this.props.history.location.state ? this.props.history.location.state.dati_bb.localita : '',\r\n      provincia: this.props.history.location.state ? this.props.history.location.state.dati_bb.provincia : '',\r\n      tipo_proprieta: this.props.history.location.state ? this.props.history.location.state.dati_bb.tipo_proprieta : '',\r\n      servizi: this.props.history.location.state ? this.props.history.location.state.dati_bb.servizi : '',\r\n      descrizione: this.props.history.location.state ? this.props.history.location.state.dati_bb.descrizione : '',\r\n      ref_proprieta_bb: this.props.history.location.state ? this.props.history.location.state.dati_bb.ref_proprieta_bb : '',\r\n      check_in: this.props.history.location.state ? this.props.history.location.state.dati_bb.check_in : '',\r\n      check_out: this.props.history.location.state ? this.props.history.location.state.dati_bb.check_out : '',\r\n      apiResponse: [],\r\n      error: false,\r\n      errorMessage: '',\r\n      success: false\r\n    }\r\n  }\r\n\r\n  onChange = (e) => {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  }\r\n\r\n  onSubmit = (e) => {\r\n    const data1 = {\r\n      nome_proprieta: this.state.nome_proprieta,\r\n      indirizzo: this.state.indirizzo,\r\n      localita: this.state.localita,\r\n      provincia: this.state.provincia,\r\n      tipo_proprieta: this.state.tipo_proprieta,\r\n      servizi: this.state.servizi,\r\n      ref_proprietario: this.state.ref_proprietario,\r\n      descrizione: this.state.descrizione,\r\n      id_proprieta: this.state.id_proprieta\r\n    };\r\n\r\n    fetch('http://localhost:9000/updateProprieta/fields', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-type':'application/json'\r\n        },\r\n        body: JSON.stringify(data1)\r\n    })\r\n    .then((result) => {result.text()})\r\n    .then((result) => {\r\n      this.setState({ apiResponse: result });\r\n\r\n      if(this.state.apiResponse && this.state.apiResponse.status === 'error') {\r\n        this.setState({\r\n          error: true,\r\n          errorMessage: this.state.apiResponse.message\r\n        });\r\n      }\r\n      else {\r\n        const data2 = {\r\n          check_in: this.state.check_in,\r\n          check_out: this.state.check_out,\r\n          ref_proprieta_bb: this.state.ref_proprieta_bb,\r\n        };\r\n    \r\n        fetch('http://localhost:9000/updateBB/fields',{\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type':'application/json'\r\n            },\r\n            body: JSON.stringify(data2)\r\n        })\r\n        .then((result) => result.text())\r\n        .then((result) => {\r\n          this.setState({ apiResponse: result });\r\n    \r\n          if(this.state.apiResponse && this.state.apiResponse.status === 'error') {\r\n            this.setState({\r\n              error: true,\r\n              errorMessage: this.state.apiResponse.message\r\n            });\r\n          }\r\n          else {\r\n            this.setState({ success: true });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if(!localStorage.getItem('logged') || !localStorage.getItem('proprietario')) {\r\n      return <Redirect\r\n          to={{\r\n              pathname: \"/ErrorPage\",\r\n              state: { \r\n                error: true,\r\n                errorMessage: \"Utente non autorizzato\" \r\n              }\r\n          }}\r\n      />\r\n    }\r\n    else if(this.state.error) {\r\n      return <Redirect \r\n        to = {{\r\n          pathname: \"/ErrorPage\",\r\n          state: {\r\n            error: true,\r\n            errorMessage: this.state.errorMessage\r\n          }\r\n        }}\r\n      />\r\n    }\r\n    else if(this.state.success) {\r\n      return (\r\n        <div className = \"Errore\">\r\n          <h1>Modifiche avvenute con successo!</h1>\r\n          <p>Il tuo B&B è stato modificato correttamente all'interno del sistema</p>\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      var bb = this.state.dati_bb ? this.state.dati_bb : '';\r\n\r\n      return (\r\n          <div className=\"background\">\r\n        <div className=\"containerNew\">  \r\n          <div className=\"contentNew\">\r\n            <form>\r\n            <h2>Modifica il tuo B&B con le informazioni che preferisci!</h2>\r\n              <label htmlFor = \"nome_proprieta\">Nome</label>\r\n                <input\r\n                  type = \"text\"\r\n                  id = \"nome_proprieta\"\r\n                  name = \"nome_proprieta\"\r\n                  defaultValue = {bb.nome_proprieta}\r\n                  onChange = {this.onChange}\r\n                  className = \"i\"\r\n                />\r\n                <label htmlFor = \"localita\">Città</label>\r\n                <input\r\n                  type = \"text\"\r\n                  id = \"localita\"\r\n                  name = \"localita\"\r\n                  defaultValue = {bb.localita}\r\n                  onChange = {this.onChange}\r\n                  className = \"i\"\r\n                />\r\n\r\n                <label htmlFor = \"indirizzo\">Indirizzo</label>\r\n                <input\r\n                  type = \"text\"\r\n                  id = \"indirizzo\"\r\n                  name = \"indirizzo\"\r\n                  defaultValue = {bb.indirizzo}\r\n                  onChange = {this.onChange}\r\n                  className = \"i\"\r\n                />\r\n                \r\n                <label htmlFor = \"provincia\">Provincia</label>\r\n                <input\r\n                  type = \"text\"\r\n                  id = \"provincia\"\r\n                  name = \"provincia\"\r\n                  defaultValue = {bb.provincia}\r\n                  onChange = {this.onChange}\r\n                  className = \"i\"\r\n                />\r\n\r\n                <label htmlFor = \"servizi\">Servizi</label>\r\n                <input\r\n                  type = \"text\"\r\n                  id = \"servizi\"\r\n                  name = \"servizi\"\r\n                  defaultValue = {bb.servizi}\r\n                  onChange = {this.onChange}\r\n                  className = \"i\"\r\n                />\r\n                <label htmlFor = \"descrizione\">Descrizione</label>\r\n                <textarea \r\n                  id = 'descrizione'\r\n                  name = 'descrizione'\r\n                  defaultValue = {bb.descrizione}\r\n                  onChange = {this.onChange}\r\n                  className = 'iTA'\r\n                >\r\n                </textarea>\r\n\r\n                <label htmlFor = \"check_in\">Check-in</label>\r\n                <input\r\n                  type = \"text\"\r\n                  pattern = \"^([0-9]|1[0-9]|2[0-3]).[0-5][0-9]$\"\r\n                  title = \"Inserire un orario corretto, usando un punto per separare i minuti\"\r\n                  id = \"check_in\"\r\n                  name = \"check_in\"\r\n                  defaultValue = {bb.check_in + '0'}\r\n                  onChange = {this.onChange}\r\n                  className = \"i\"\r\n                />\r\n\r\n                <label htmlFor = \"check_out\">Check-out</label>\r\n                <input\r\n                  type = \"text\"\r\n                  pattern = \"^([0-9]|1[0-9]|2[0-3]).[0-5][0-9]$\"\r\n                  title = \"Inserire un orario corretto, usando un punto per separare i minuti\"\r\n                  id = \"check_out\"\r\n                  name = \"check_out\"\r\n                  defaultValue = {bb.check_out + '0'}\r\n                  onChange = {this.onChange}\r\n                  className = \"i\"\r\n                />\r\n              \r\n                <Button variant=\"primary\" onClick = {this.onSubmit}>\r\n                Carica\r\n              </Button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default ModificaBeB;"]},"metadata":{},"sourceType":"module"}