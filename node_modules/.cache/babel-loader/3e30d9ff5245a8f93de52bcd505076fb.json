{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexd\\\\Documents\\\\Progetto-Unipa\\\\Frontend\\\\src\\\\components\\\\CaseVacanzaContainer.js\";\nimport React from \"react\"; //import { withCasaVacanzaConsumer } from \"../CasaVacanza/context\"\n//import Loading from \"./Loading\";\n\nimport CaseVacanzaFilter from './CaseVacanzaFiltro';\nimport CaseVacanzaList from \"./CaseVacanzaLista\";\nimport './CaseVacanzaLista.css';\nimport { Redirect } from \"react-router-dom\";\n\nclass CasaVacanzaContainer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      var datiRicerca = e;\n      const data = {\n        tipo: 'cv',\n        localita: datiRicerca.localita,\n        provincia: '',\n        servizi: '',\n        posti: datiRicerca.posti,\n        tariffa: datiRicerca.tariffa,\n        checkIn: '',\n        checkOut: ''\n      };\n      fetch('http://localhost:9000/ricercaAlloggio/risultati', {\n        method: \"POST\",\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(result => result.text()).then(result => {\n        console.log(JSON.parse(result));\n        this.setState({\n          case: JSON.parse(result)\n        });\n\n        if (this.state.case.status === 'error') {\n          this.setState({\n            error: true\n          });\n          this.setState({\n            errorMessage: this.state.case.message\n          });\n        }\n      });\n    };\n\n    this.state = {\n      case: this.props.case ? this.props.case : '',\n      ospiti: this.props.ospiti ? this.props.ospiti : '',\n      apiResponse: [],\n      error: false,\n      errorMessage: ''\n    };\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:9000/servizi/all', {\n      method: \"GET\",\n      headers: {\n        'Content-type': 'application/json'\n      }\n    }).then(result => result.text()).then(result => {\n      this.setState({\n        apiResponse: JSON.parse(result)\n      });\n\n      if (this.state.apiResponse.status === 'error') {\n        this.setState({\n          error: true\n        });\n        this.setState({\n          errorMessage: this.state.apiResponse_strutture.message\n        });\n      }\n    });\n  }\n\n  render() {\n    if (this.state.error) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/ErrorPage\",\n          state: {\n            error: true,\n            errorMessage: this.state.errorMessage\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CaseVacanzaFilter, {\n      servizi: this.state.apiResponse,\n      ospiti: this.props.ospiti,\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ListaProp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CaseVacanzaList, {\n      case: this.state.case,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n/*function CasaVacanzaContainer({ context }) {\r\n  const { loading, sortedCaseVacanza, caseVacanza } = context;\r\n  if (loading) {\r\n    return <Loading />;\r\n  }\r\n  return (\r\n    <>\r\n      <CaseVacanzaFilter casaVacanza={caseVacanza} />\r\n      <div className=\"ListaProp\">\r\n      <CaseVacanzaList caseVacanza={sortedCaseVacanza} />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withCasaVacanzaConsumer(CasaVacanzaContainer);*/\n\n\nexport default CasaVacanzaContainer;","map":{"version":3,"sources":["C:/Users/alexd/Documents/Progetto-Unipa/Frontend/src/components/CaseVacanzaContainer.js"],"names":["React","CaseVacanzaFilter","CaseVacanzaList","Redirect","CasaVacanzaContainer","Component","constructor","props","onChange","e","datiRicerca","data","tipo","localita","provincia","servizi","posti","tariffa","checkIn","checkOut","fetch","method","headers","body","JSON","stringify","then","result","text","console","log","parse","setState","case","state","status","error","errorMessage","message","ospiti","apiResponse","componentDidMount","apiResponse_strutture","render","pathname"],"mappings":"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","sourcesContent":["import React from \"react\";\r\n//import { withCasaVacanzaConsumer } from \"../CasaVacanza/context\"\r\n//import Loading from \"./Loading\";\r\nimport CaseVacanzaFilter from './CaseVacanzaFiltro';\r\nimport CaseVacanzaList from \"./CaseVacanzaLista\";\r\n\r\nimport './CaseVacanzaLista.css'\r\n\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nclass CasaVacanzaContainer extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      case: this.props.case ? this.props.case : '',\r\n      ospiti: this.props.ospiti ? this.props.ospiti : '',\r\n      apiResponse: [],\r\n      error: false,\r\n      errorMessage: ''\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    fetch('http://localhost:9000/servizi/all', {\r\n      method: \"GET\",\r\n      headers: {\r\n        'Content-type': 'application/json'\r\n      }\r\n    })\r\n    .then((result) => result.text())\r\n    .then((result) => {\r\n        this.setState({ apiResponse: JSON.parse(result) });\r\n    \r\n        if(this.state.apiResponse.status === 'error') {\r\n            this.setState({ error: true });\r\n            this.setState({ errorMessage: this.state.apiResponse_strutture.message });\r\n        }\r\n    });\r\n  }\r\n\r\n  onChange = (e) => {\r\n    var datiRicerca = e;\r\n    \r\n    const data = {\r\n      tipo: 'cv',\r\n      localita: datiRicerca.localita,\r\n      provincia: '',\r\n      servizi: '',\r\n      posti: datiRicerca.posti,\r\n      tariffa: datiRicerca.tariffa,\r\n      checkIn: '',\r\n      checkOut: ''\r\n    };\r\n\r\n  fetch('http://localhost:9000/ricercaAlloggio/risultati', {\r\n      method: \"POST\",\r\n      headers: {\r\n          'Content-type': 'application/json'\r\n      },\r\n      body: JSON.stringify(data)\r\n  })\r\n  .then((result) => result.text())\r\n  .then((result) => {\r\n      console.log(JSON.parse(result));\r\n      this.setState({ case: JSON.parse(result) });\r\n\r\n      if(this.state.case.status === 'error') {\r\n          this.setState({ error: true });\r\n          this.setState({ errorMessage: this.state.case.message });\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.error) {\r\n      return <Redirect \r\n      to = {{\r\n        pathname: \"/ErrorPage\",\r\n        state: {\r\n          error: true,\r\n          errorMessage: this.state.errorMessage\r\n        }\r\n      }}\r\n    />\r\n  }\r\n    return (\r\n      <>\r\n        <CaseVacanzaFilter servizi={this.state.apiResponse} ospiti = {this.props.ospiti} onChange = {this.onChange} />\r\n        <div className=\"ListaProp\">\r\n          <CaseVacanzaList case={this.state.case} />\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\n/*function CasaVacanzaContainer({ context }) {\r\n  const { loading, sortedCaseVacanza, caseVacanza } = context;\r\n  if (loading) {\r\n    return <Loading />;\r\n  }\r\n  return (\r\n    <>\r\n      <CaseVacanzaFilter casaVacanza={caseVacanza} />\r\n      <div className=\"ListaProp\">\r\n      <CaseVacanzaList caseVacanza={sortedCaseVacanza} />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withCasaVacanzaConsumer(CasaVacanzaContainer);*/\r\n\r\nexport default CasaVacanzaContainer;"]},"metadata":{},"sourceType":"module"}